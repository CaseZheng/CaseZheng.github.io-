<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="msvalidate.01" content="F14AAB2D4C842CB9F200D0A80DA8CB2F">
  <meta name="baidu-site-verification" content="GNlbaIvRtqlfiBfg">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.casezheng.date","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="CaseZheng的博客网站">
<meta property="og:type" content="website">
<meta property="og:title" content="CaseZheng">
<meta property="og:url" content="http://www.casezheng.date/page/9/index.html">
<meta property="og:site_name" content="CaseZheng">
<meta property="og:description" content="CaseZheng的博客网站">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CaseZheng">
<meta name="twitter:description" content="CaseZheng的博客网站">

<link rel="canonical" href="http://www.casezheng.date/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>CaseZheng</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4f1686055a927fa7bf1a09bc1143b57c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">CaseZheng</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">CaseZheng Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/08/23/design-pattern-5-factory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/23/design-pattern-5-factory/" class="post-title-link" itemprop="url">设计模式探秘-5-工厂方法模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-23 13:29:00" itemprop="dateCreated datePublished" datetime="2017-08-23T13:29:00+08:00">2017-08-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:36" itemprop="dateModified" datetime="2020-04-12T12:56:36+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h1><p>工厂方法模式的定义：定义一个用于创建对象的接口，让子类决定实例化哪一个类，工厂方法使一个类的实例化延迟到其子类。</p>
<h2 id="工厂方法优点"><a href="#工厂方法优点" class="headerlink" title="工厂方法优点"></a>工厂方法优点</h2><ol>
<li>良好的封装性，代码结构清晰，一个对象创建是有约束的，只要知道对象类的名称（或约束字符串）就可以了，不需要知道创建对象的过程，降低模块间耦合。</li>
<li>工厂方法模式的扩展性非常优秀。</li>
<li>屏蔽产品类，调用者不用关心产品类的实现，只需要关系产品的接口。</li>
<li>工厂模式是典型的解耦框架。高层模块只需要知道产品的抽象类，其它的实现类则不用关系，符合迪米特法则，不需要就不要去交流，符合依赖倒置原则，只依赖产品的抽象类，也符合里氏替换原则，使用产品子类替换父类。</li>
</ol>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><ol>
<li>工厂方法模式是new一个对象的替代品，在需要生成对象的地方都可以使用，但需要慎重考虑。因为会增加代码的复杂度。</li>
<li>需要灵活、可扩展的框架时，可以考虑工厂方法模式。</li>
<li>工厂模式可以用在异构项目中。</li>
<li>可以使用在测试驱动开发的框架下。</li>
</ol>
<h2 id="工厂方法模式的扩展"><a href="#工厂方法模式的扩展" class="headerlink" title="工厂方法模式的扩展"></a>工厂方法模式的扩展</h2><ol>
<li>缩小为简单工厂模式（静态工厂模式），其缺点是工厂类的扩展比较困难，不符合开闭原则，但仍然是非常使用的设计模式。</li>
<li>升级为多个工厂类</li>
<li>替代单例模式，工厂每次都返回唯一的那个对象即可</li>
<li>延迟初始化，对象使用完，不销毁，下次申请的时候从缓存取一个，初始化后返回</li>
</ol>
<h2 id="工厂模式实现"><a href="#工厂模式实现" class="headerlink" title="工厂模式实现"></a>工厂模式实现</h2><p>常见工厂模式类图</p>
<p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuKhEIImkLWWeoayfJIvHgEPI009bA5T34ypLhaFmQw4QdFFpaejIIr9HDMgZ2SCDm1I76UIMc5oINrG9indAXMj4upiNfIOYcM9Lbf-Peg2bK9sOL5nI15HQY-50LFErqOGn74Z0FfXtjO3se0U1Rcc1ReqTB2Yvq1q0bOPoCNJh5MMcPvJesQ4xdCiXDIy56540"></p>
<p>简单工厂模式<br><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuKhEIImkLWWeoayfJIvHgEPI009bA5T34ypLhaFmQw4QdFFpaejIIr9HDMgZ2SCDm1I76UIMc5oINrG9indAXMj4upiNfIOYcM85iruBQ1uNkfjqImjqQ-nWViEGrYlAJCyeqRE3EO7B8JKl1HWa0000"></p>
<p>多个工厂类<br><img src="https://www.plantuml.com/plantuml/svg/XPB12i8m38RlVOg2bssoWJbw68E1Pr-XTaK7SvEs4sJEPtUCh4fZNMz_qlnVqgOmLcZRNnic6s4CF-gkwgNb0-FJsQ2CubbkNnyzOa7PjL8hgp2pmygj7tSMFn81BmXuGSWBlhmEGjfEFvP1KBfAJvTQ2MSJnVjxLrSyuOCu6QkdgoFf4Gt8l4kSzEWdVAHxm2J4WW0BGYnOOS7C8Z-OzhVqcI-hmCZ4c4TDwpDTdoysoybRCVB1_r6mWe8W2bYXscfQwpS0"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//工厂模式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">virtual</span> ~Product()&#123;&#125;;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Product()&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct</span>:</span><span class="keyword">public</span> Product</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ConcreteProduct()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~ConcreteProduct()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">virtual</span> ~Factory()&#123;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>* <span class="title">CreateProduct</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Factory()&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory</span>:</span><span class="keyword">public</span> Factory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ConcreteFactory()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~ConcreteFactory()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Product* <span class="title">CreateProduct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Factory *fac = <span class="keyword">new</span> ConcreteFactory();</span><br><span class="line">    Product *p = (Product*)fac-&gt;CreateProduct();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol>
<li>设计模式之禅</li>
<li>GoF+23种设计模式解析</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/08/21/design-pattern-4-singleton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/21/design-pattern-4-singleton/" class="post-title-link" itemprop="url">设计模式探秘-4-单例模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-21 23:12:00" itemprop="dateCreated datePublished" datetime="2017-08-21T23:12:00+08:00">2017-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:36" itemprop="dateModified" datetime="2020-04-12T12:56:36+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><p>单例模式定义：确保某一个类只有一个实例，而且自行实例化并向整个系统提供该实例。</p>
<h2 id="单例模式优点："><a href="#单例模式优点：" class="headerlink" title="单例模式优点："></a>单例模式优点：</h2><ol>
<li>单例模式在内存中只有一个实例，减少了内存开支，特别是一个对象需要频繁创建、销毁，而且创建或销毁时性能又无法优化时，单例模式的优势非常明显。</li>
<li>单例模式只生产一个实例，减少了系统的性能开销，当一个对象的产生需要比较多的资源时，则可以通过在应用启动时直接生产一个单例对象，然后永久驻留在内存中的方式来解决。</li>
<li>单例模式可以避免对资源的多重访问。</li>
<li>单例模式可以在系统设置全局的访问点，优化和共享资源访问。</li>
</ol>
<h2 id="单例模式缺点："><a href="#单例模式缺点：" class="headerlink" title="单例模式缺点："></a>单例模式缺点：</h2><ol>
<li>单例模式一般没有接口，扩展困难。因为接口对于单例模式没有意义，单例模式“自行实例化”，并且提供单一实例，接口和抽象类是不可能被实例化的。但特殊情况下单例模式可以实现接口、被继承等。</li>
<li>单例模式对测试不利。并行开发环境中，单例模式未完成前，不能进行测试，没有接口也就无法虚拟对象。</li>
<li>单例模式与单一职责原则有冲突。单例模式把“要单例”和业务逻辑融合在一个类中。</li>
</ol>
<h2 id="单例模式使用场景"><a href="#单例模式使用场景" class="headerlink" title="单例模式使用场景"></a>单例模式使用场景</h2><p>在一个系统中，如果要求有且仅有一个对象，如果出现多个会有不良反应，就可以使用单例模式。</p>
<ol>
<li>要求生成唯一化序列号的环境。</li>
<li>在整个项目中需要一个共享访问点或共享数据。</li>
<li>创建一个对象需要消耗的资源过多。</li>
<li>需要定义大量静态方法或静态变量的环境，可以采用单例模式。</li>
</ol>
<h2 id="单例模式和全局变量"><a href="#单例模式和全局变量" class="headerlink" title="单例模式和全局变量"></a>单例模式和全局变量</h2><ol>
<li>全局变量不能防止实例化多个对象。</li>
<li>使用全局变量将使对象无论是否被用到都要被创建。</li>
</ol>
<h2 id="单例模式的实现"><a href="#单例模式的实现" class="headerlink" title="单例模式的实现"></a>单例模式的实现</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//常见的单例模式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingletonOne</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SingletonOne()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SingletonOne(<span class="keyword">const</span> SingletonOne &amp;right);</span><br><span class="line">    SingletonOne &amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> SingletonOne &amp;right);</span><br><span class="line">    <span class="keyword">static</span> SingletonOne _instance;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> SingletonOne&amp; <span class="title">Instance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _instance;</span><br><span class="line">    &#125;;</span><br><span class="line">    ~SingletonOne()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">SingletonOne SingletonOne::_instance;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingletonTwo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SingletonTwo()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SingletonTwo(<span class="keyword">const</span> SingletonTwo &amp;right);</span><br><span class="line">    SingletonTwo &amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> SingletonTwo &amp;right);</span><br><span class="line">    <span class="keyword">static</span> SingletonTwo *_instance;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> SingletonTwo* <span class="title">Instance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="literal">nullptr</span> == _instance )</span><br><span class="line">        &#123;</span><br><span class="line">            _instance = <span class="keyword">new</span> SingletonTwo();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> _instance;</span><br><span class="line">    &#125;;</span><br><span class="line">    ~SingletonTwo()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">SingletonTwo* SingletonTwo::_instance = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">SingletonThree</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SingletonThree()&#123;&#125;</span><br><span class="line">    SingletonThree(<span class="keyword">const</span> SingletonThree &amp;right);</span><br><span class="line">    SingletonThree &amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> SingletonThree &amp;right);</span><br><span class="line">    <span class="keyword">static</span> T _instance;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> T&amp; <span class="title">Instance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _instance;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">virtual</span> ~SingletonThree()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">T</span> <span class="title">SingletonThree</span>&lt;T&gt;:</span>:_instance;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~A()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;__FUNCTION__&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> SingletonThree&lt;A&gt; SingletonA;   <span class="comment">//SingletonA</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//SingletonOne::Instance().print();</span></span><br><span class="line">    <span class="comment">//SingletonTwo::Instance()-&gt;print();</span></span><br><span class="line">    SingletonA::Instance().print();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol>
<li>设计模式之禅</li>
<li>GoF+23种设计模式解析</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/08/19/design-pattern-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/19/design-pattern-3/" class="post-title-link" itemprop="url">设计模式探秘-3-设计模式简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-19 22:02:00" itemprop="dateCreated datePublished" datetime="2017-08-19T22:02:00+08:00">2017-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式简介"><a href="#设计模式简介" class="headerlink" title="设计模式简介"></a>设计模式简介</h1><p>Christopher Alexander 说:“<strong>模式是在某一背景下某个问题的一种解决方案</strong>。”它们绝不只是解决某人个别问题的模板。它们是描述动机的一种方式,不仅包括我们要得到的效果,也包括困扰我们的问题。</p>
<h2 id="设计模式的关键特征"><a href="#设计模式的关键特征" class="headerlink" title="设计模式的关键特征"></a>设计模式的关键特征</h2><div class="table-container">
<table>
<thead>
<tr>
<th>项目</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>意图</td>
<td style="text-align:center">每个模式都有唯一的用于标识的名称</td>
</tr>
<tr>
<td>问题</td>
<td style="text-align:center">模式的目的</td>
</tr>
<tr>
<td>解决方案</td>
<td style="text-align:center">模式能够为问题提供合适其所处环境的一个解决方案</td>
</tr>
<tr>
<td>参与者和协作者</td>
<td style="text-align:center">模式所涉及的实体</td>
</tr>
<tr>
<td>效果</td>
<td style="text-align:center">使用模式的效果，研究模式中起作用的各种因素</td>
</tr>
<tr>
<td>实现</td>
<td style="text-align:center">模式的实现方式。实现只是模式的具体体现，而不能视为模式本身</td>
</tr>
<tr>
<td>一般性结构</td>
<td style="text-align:center">显示模式典型结构的标准图</td>
</tr>
</tbody>
</table>
</div>
<p>一个好的设计模式的论述应该覆盖使用这个模式的优点和缺点</p>
<h2 id="学习设计模式的好处"><a href="#学习设计模式的好处" class="headerlink" title="学习设计模式的好处"></a>学习设计模式的好处</h2><ol>
<li>对不断重复出现问题,复用既有的、高质量的解决方案。</li>
<li>确立通用的术语,改善团队内的沟通。</li>
<li>提升思考层次。</li>
<li>判断设计是否正确,而不仅仅是能够奏效。</li>
<li>改善个人学习和团队学习。</li>
<li>提高代码的可修改性和可维护性。</li>
<li>采用更佳设计方案,即使没有明确使用模式。</li>
<li>发现巨型继承层次结构的替代方案。</li>
</ol>
<h2 id="设计模式分类"><a href="#设计模式分类" class="headerlink" title="设计模式分类"></a>设计模式分类</h2><h3 id="根据目的，设计模式可分为创建型、结构型和行为型三种。"><a href="#根据目的，设计模式可分为创建型、结构型和行为型三种。" class="headerlink" title="根据目的，设计模式可分为创建型、结构型和行为型三种。"></a>根据目的，设计模式可分为创建型、结构型和行为型三种。</h3><ol>
<li>创建型主要用于创建对象</li>
<li>结构型用于处理类和对象的组合</li>
<li>行为型用于描述类和对象如何交互和怎样分配职责</li>
</ol>
<h3 id="根据范围，即模式主要用于处理类之间关系还是对象之间的关系可分为类模式和对象模式两种"><a href="#根据范围，即模式主要用于处理类之间关系还是对象之间的关系可分为类模式和对象模式两种" class="headerlink" title="根据范围，即模式主要用于处理类之间关系还是对象之间的关系可分为类模式和对象模式两种"></a>根据范围，即模式主要用于处理类之间关系还是对象之间的关系可分为类模式和对象模式两种</h3><ol>
<li>类模式处理类和子类之间的关系，通常通过继承建立，编译时刻确定下来，属于静态的</li>
<li>对象模式处理对象间关系，运行时时刻变化，具有动态性</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right">范围\目的</th>
<th style="text-align:center">创建型模式</th>
<th style="text-align:center">结构型模式</th>
<th style="text-align:left">行为型模式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">类模式</td>
<td style="text-align:center">工厂方法模式</td>
<td style="text-align:center">（类）适配器模式</td>
<td style="text-align:left">解释器模式<br>模版方法模式</td>
</tr>
<tr>
<td style="text-align:right">对象模式</td>
<td style="text-align:center">抽象工厂模式<br>建造者模式<br>原型模式<br>单例模式</td>
<td style="text-align:center">（对象）适配器模式<br>桥接模式<br>组合模式<br>装饰模式<br>享元模式<br>外观模式<br>代理模式</td>
<td style="text-align:left">职责模式<br>命令模式<br>迭代器模式<br>中介者模式<br>备忘录模式<br>观察者模式<br>状态模式<br>策略模式<br>访问者模式</td>
</tr>
</tbody>
</table>
</div>
<h2 id="基本设计模式概述"><a href="#基本设计模式概述" class="headerlink" title="基本设计模式概述"></a>基本设计模式概述</h2><ol>
<li>Abstract Factory（抽象工厂模式）：提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</li>
<li>Adapter（适配器模式）：将一个类的接口转换成客户希望的另外一个接口。Adapter模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</li>
<li>Bridge（桥接模式）：将抽象部分与它的实现部分分离，使它们都可以独立地变化。</li>
<li>Builder（建造者模式）：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</li>
<li>Chain of Responsibility（责任链模式）：为解除请求的发送者和接收者之间耦合，而使多个对象都有机会处理这个请求。将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它。</li>
<li>Command（命令模式）：将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可取消的操作。</li>
<li>Composite（组合模式）：将对象组合成树形结构以表示“部分-整体”的层次结构。它使得客户对单个对象和复合对象的使用具有一致性。</li>
<li>Decorator（装饰模式）：动态地给一个对象添加一些额外的职责。就扩展功能而言， 它比生成子类方式更为灵活。</li>
<li>Facade（外观模式）：为子系统中的一组接口提供一个一致的界面，Facade模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</li>
<li>Factory Method（工厂模式）：定义一个用于创建对象的接口，让子类决定将哪一个类实例化。Factory Method使一个类的实例化延迟到其子类。</li>
<li>Flyweight（享元模式）：运用共享技术有效地支持大量细粒度的对象。</li>
<li>Interpreter（解析器模式）：给定一个语言, 定义它的文法的一种表示，并定义一个解释器, 该解释器使用该表示来解释语言中的句子。</li>
<li>Iterator（迭代器模式）：提供一种方法顺序访问一个聚合对象中各个元素，而又不需暴露该对象的内部表示。</li>
<li>Mediator（中介模式）：用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</li>
<li>Memento（备忘录模式）：在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到保存的状态。</li>
<li>Observer（观察者模式）：定义对象间的一种一对多的依赖关系,以便当一个对象的状态发生改变时,所有依赖于它的对象都得到通知并自动刷新。</li>
<li>Prototype（原型模式）：用原型实例指定创建对象的种类，并且通过拷贝这个原型来创建新的对象。</li>
<li>Proxy（代理模式）：为其他对象提供一个代理以控制对这个对象的访问。</li>
<li>Singleton（单例模式）：保证一个类仅有一个实例，并提供一个访问它的全局访问点。</li>
<li>State（状态模式）：允许一个对象在其内部状态改变时改变它的行为。对象看起来似乎修改了它所属的类。</li>
<li>Strategy（策略模式）：定义一系列的算法,把它们一个个封装起来, 并且使它们可相互替换。本模式使得算法的变化可独立于使用它的客户。</li>
<li>Template Method（模板方法模式）：定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。Template Method使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</li>
<li>Visitor（访问者模式）：表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</li>
</ol>
<h2 id="软件设计六大原则"><a href="#软件设计六大原则" class="headerlink" title="软件设计六大原则"></a>软件设计六大原则</h2><ol>
<li>单一职责原则</li>
<li>里氏替换原则</li>
<li>依赖导致原则</li>
<li>接口隔离原则</li>
<li>迪米特法则</li>
<li>开闭原则</li>
</ol>
<h3 id="单一职责原则（Single-Responsibility-Principle）简称SRP"><a href="#单一职责原则（Single-Responsibility-Principle）简称SRP" class="headerlink" title="单一职责原则（Single Responsibility Principle）简称SRP"></a>单一职责原则（Single Responsibility Principle）简称SRP</h3><p>单一职责原则定义：应该有且仅有一个原因引起类的变更<br>There should never be more than one reason for a class to change.</p>
<p>单一职责原则的好处：</p>
<ol>
<li>降低类的复杂性，实现的职责都有清晰明确的定义</li>
<li>可读性提高</li>
<li>可维护性提高</li>
<li>变更引起的风险降低，变更是必不可少的，如果接口的单一职责做得好，一个接口修改只对相应的实现类有影响，对其它接口无影响，这对系统的扩展性、维护性都有非常大的帮助</li>
</ol>
<p>单一职责原则最难划分的就是职责。<br>单一职责原则适用于接口、类，也适用于方法。<br>对于接口和方法一定要做到单一职责，对于类的设计尽量做到只有一个原因引起变化。</p>
<h3 id="里氏替换原则（Liskov-Substitution-Principle）简称LSP"><a href="#里氏替换原则（Liskov-Substitution-Principle）简称LSP" class="headerlink" title="里氏替换原则（Liskov Substitution Principle）简称LSP"></a>里氏替换原则（Liskov Substitution Principle）简称LSP</h3><p>继承优点：</p>
<ol>
<li>代码共享，减少创建类的工作量，每个子类都拥有父类的方法和属性</li>
<li>提高代码的重用性</li>
<li>子类可以形似父类，但又异于父类</li>
<li>提高代码的可扩展性</li>
<li>提高产品或项目的开放性</li>
</ol>
<p>继承缺点：</p>
<ol>
<li>继承是有侵入性的。只要继承，就必须拥有父类的所有属性和方法</li>
<li>降低代码的灵活性。子类必须拥有父类的属性和方法</li>
<li>增强耦合性。当父类的常量、变量和方法被修改时，必须要考虑子类的修改</li>
</ol>
<p>两种里氏替换原则的定义：</p>
<ol>
<li>最正宗的，如果对每一个类型为S的对象o1，都有类型为T的对象o2，使得以T定义的所有程序P在所有对象o1替换为o2时，程序P的行为没有发生变化，那么类型S时类型T的子类型。</li>
<li>所有引用基类的地方必须能透明的使用其子类的对象。</li>
</ol>
<p>通俗的讲，只要父类能出现的地方子类就可以出现，而且替换为其它子类也不会产生任何错误或异常，使用者可能根本不需要知道是父类还是子类。但反过来就不行了，有子类出现的地方，父类未必适应。</p>
<p>里氏替换原则为良好的继承定义了一个规范，一句简单的定义包含了4层定义。</p>
<ol>
<li>子类必须完全实现父类的方法<ol>
<li>在类中调用其它类时务必使用父类或接口，如果不能使用父类或接口，则说明类的设计已经违背了LSP原则。</li>
<li>如果子类不能完整的实现父类的方法，或者父类的某些方法在子类中已经发生“畸变”，则建议断开父子继承关系，采用依赖、聚合、组合等关系替代继承。</li>
</ol>
</li>
<li>子类可以有自己的方法和属性</li>
<li>覆盖或实现父类的方法时输入参数可以被放大<ul>
<li>子类中方法的前置条件必须与超类中被覆盖的方法的前置条件相同或者更宽松。</li>
</ul>
</li>
<li>覆盖或实现父类的方法时输出结果可以被缩小<ul>
<li>父类方法的返回值是一个类型T，子类的相同方法（重写或覆盖）的返回值为S，里氏替换原则要求S必须小于等于T，即S和T是同一类型，或S是T的子类。</li>
</ul>
</li>
</ol>
<p>采用里氏替换原则的目的就是增强程序的健壮性，版本升级时也可以保持非常好的兼容性。即使增加子类，原有的子类还可以继续运行。</p>
<p>采用里氏替换原则时，应尽量避免子类的“个性”，一旦子类有“个性”，该子类和父类的关系就很难调和了，把子类当做父类，子类的“个性“被抹杀，将子类作为一个业务来使用，会让代码的耦合关系变得扑朔迷离——缺乏类替换的标准。</p>
<h3 id="依赖倒置原则（Dependence-Inversion-Principle）简称DIP"><a href="#依赖倒置原则（Dependence-Inversion-Principle）简称DIP" class="headerlink" title="依赖倒置原则（Dependence Inversion Principle）简称DIP"></a>依赖倒置原则（Dependence Inversion Principle）简称DIP</h3><p>依赖倒置原则，要依赖于抽象，不要依赖于具体：</p>
<ol>
<li>高层模块不应该依赖底层模块，两者都应该依赖于其抽象</li>
<li>抽象不应该依赖于细节</li>
<li>细节应该依赖于抽象</li>
</ol>
<p>即”面向接口编程”——OOD（Object-Oriented Design，面向对象设计）的精髓之一。<br>采用依赖倒置原则可以减少类间的耦合性，提高系统的稳定性，降低并发开发引起的风险，提高代码的可读性和可维护性。<br>依赖时可以传递的，A依赖于B对象，B又依赖于C，C又依赖于D……  但只要做到抽象依赖，即使是多层的依赖也无所畏惧。<br>依赖的三种写法：</p>
<ol>
<li>构造函数传递依赖对象（构造函数注入）</li>
<li>Setter方法传递依赖对象</li>
<li>接口声明依赖对象（接口注入）</li>
</ol>
<p>使用依赖倒置原则的方法：</p>
<ol>
<li>每个类尽量都有接口或抽象类、或抽象类和接口都有</li>
<li>类型的表面尽量是接口或者抽象类</li>
<li>任何类都不应该从具体类派生</li>
<li>尽量不去覆写基类的方法</li>
<li>结合里氏替换原则使用</li>
</ol>
<h3 id="接口隔离原则"><a href="#接口隔离原则" class="headerlink" title="接口隔离原则"></a>接口隔离原则</h3><p>接口分为两种：</p>
<ol>
<li>实例接口</li>
<li>类接口</li>
</ol>
<p>隔离的定义：</p>
<ol>
<li>客户端不应该依赖它不需要的接口</li>
<li>类间的依赖关系应该建立在最小的接口上</li>
</ol>
<p>即建立单一接口，不要建立臃肿庞大的接口。通俗说：接口尽量细化，同时接口中方法尽量少。</p>
<p>接口隔离原则是对接口进行规范约束，包含4层含义：</p>
<ol>
<li>接口尽量小<ul>
<li>根据接口隔离原则拆分接口时，首先必须满足单一职责原则。</li>
</ul>
</li>
<li>接口要高内聚<ul>
<li>高内聚就是提高接口、类、模块的处理能力，减少对外的交互。</li>
</ul>
</li>
<li>定制服务<ul>
<li>定制服务就是单独为一个个体提供优良的服务。定制服务必然要求：只提供访问者需要的接口。</li>
</ul>
</li>
<li>接口设计是有限度的，不能无限细化，否则虽然提高了灵活性，但也带来了结构的复杂性，开发难度增加，可维护性降低，所以接口设计要注意适度。</li>
</ol>
<p>接口隔离原则的原子划分：</p>
<ol>
<li>一个接口只服务于一个子模块或业务逻辑</li>
<li>通过业务逻辑压缩接口中的public方法，接口设计时常去回顾，让接口更加精简</li>
<li>已经污染的接口尽量去修改，若变更的风险更大，则采取适配器模式进行转化</li>
<li>了解环境，拒绝盲从。环境不同，接口拆分的标准就不同，深入了解业务逻辑，设计更好的接口</li>
</ol>
<h3 id="迪米特法则（Law-of-Demeter）简称LoD"><a href="#迪米特法则（Law-of-Demeter）简称LoD" class="headerlink" title="迪米特法则（Law of Demeter）简称LoD"></a>迪米特法则（Law of Demeter）简称LoD</h3><p>迪米特法则也称为最少知识原则（Least Knowledge Principle，LKP），规则：一个对象应该对其它对象有更少的了解。</p>
<p>迪米特法则对类的低耦合提出明确要求包含4层含义：</p>
<ol>
<li>只和朋友交流<ul>
<li>两个对象之间有耦合关系即为耦合，如：组合、聚合、依赖等。</li>
</ul>
</li>
<li>朋友之间也是有距离的<ul>
<li>类尽量不要公布太多的public方法和非静态的public变量，尽量内敛，多使用private和protected等访问权限</li>
</ul>
</li>
<li>是自己的就是自己的<ul>
<li>如果一个方法放在本类中可以，放在其它类中也可以，则坚持这个原则：如果一个方法放在本类中，即不增加类间关系，也对本类不产生负面影响，就放置在本类中。</li>
</ul>
</li>
<li>谨慎使用Serializable（序列化）</li>
</ol>
<p>迪米特法则的核心观念就是类间解耦，弱耦合，只有弱耦合之后，类的复用率才可以提高。但会产生大量的中转或调转类，导致系统复杂性提高，使维护困难。使用迪米特法则需反复权衡，既做到结构清晰，同时做到高内聚低耦合。</p>
<h3 id="开闭原则（Open-ClosePrinciple）简称OCP"><a href="#开闭原则（Open-ClosePrinciple）简称OCP" class="headerlink" title="开闭原则（Open-ClosePrinciple）简称OCP"></a>开闭原则（Open-ClosePrinciple）简称OCP</h3><p>开闭原则即一个软件实体（类、模块、函数等）<strong>应该对扩展开放，对修改关闭</strong>。<br>开闭原则指出应尽量通过扩展软件实体的行为来实现变化，而不是通过修改已有的代码来完成变化，开闭原则是为软件实体的未来事件而定制的对现行开发设计进行约束的一个原则。<br>开闭原则对扩展开放，对修改关闭，并不意味着不做任何修改，低层模块的变更，必然要有高层模块进行耦合，否则就是一个孤立无缘的代码片段。</p>
<p>变化：</p>
<ol>
<li>逻辑变化</li>
<li>子模块变化</li>
<li>可见视图变化</li>
</ol>
<p>开闭原则的重要性:</p>
<ol>
<li>开闭原则对测试的影响</li>
<li>开闭原则可以提高复用性</li>
<li>开闭原则可以提高可维护性</li>
<li>面向对象开发的要求</li>
</ol>
<p>开闭原则是一个非常虚的原则，前五个原则是对开闭原则的具体解释，但开闭原则并不局限于这么多。开闭原则在工作中的运用：</p>
<ol>
<li>抽象约束<ol>
<li>通过接口或抽象类约束扩展，对扩展进行边界限定，不允许出现接口或抽象类中不存在的public方法</li>
<li>参数类型、引用对象尽量使用接口或者抽象类，而不是实现类</li>
<li>抽象类尽量保持稳定，一旦确定即不允许修改</li>
</ol>
</li>
<li>元数据控制模块行为<br> 元数据即描述环境和数据的数据，通俗的来说就是配置参数。</li>
<li>指定项目章程</li>
<li>封装变化<ol>
<li>将相同的变化封装到一个接口或抽象类中</li>
<li>将不同的变化封装到不同的接口或抽象类中，不应该有两个不同的变化出现在同一个接口或抽象类中。</li>
</ol>
</li>
</ol>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>设计模式解析（第二版）（书籍）</li>
<li>设计模式之禅（书籍）</li>
<li><a href="https://baike.baidu.com/item/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1212549?fr=aladdin" target="_blank" rel="noopener">百度百科 设计模式</a></li>
<li><a href="http://blog.csdn.net/hguisu/article/details/7496819" target="_blank" rel="noopener">设计模式概论博客</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/08/17/design-pattern-2-uml/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/17/design-pattern-2-uml/" class="post-title-link" itemprop="url">设计模式探秘-2-UML简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-17 21:55:00" itemprop="dateCreated datePublished" datetime="2017-08-17T21:55:00+08:00">2017-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="UML简介"><a href="#UML简介" class="headerlink" title="UML简介"></a>UML简介</h1><p>UML是一种创建程序模型的图形语言（即带有语意的一种图形记号）。程序模型指的是程序的图形表示，说明代码中对象之间的关系。</p>
<h2 id="分析阶段"><a href="#分析阶段" class="headerlink" title="分析阶段"></a>分析阶段</h2><ol>
<li>用例图 涉及系统（即用户和其它系统）之间交互的实体，以及要实现的功能点。</li>
<li>活动图 关注的是问题领域的工作流，而不是程序的逻辑流。</li>
</ol>
<h2 id="观察对象交互"><a href="#观察对象交互" class="headerlink" title="观察对象交互"></a>观察对象交互</h2><p>交互图 说明特定对象如何相互交互。最常见的交互图是顺序图。</p>
<h2 id="设计阶段"><a href="#设计阶段" class="headerlink" title="设计阶段"></a>设计阶段</h2><p>类图 详细描述类之间的关系</p>
<h2 id="观察对象所处状态不同时行为的差异"><a href="#观察对象所处状态不同时行为的差异" class="headerlink" title="观察对象所处状态不同时行为的差异"></a>观察对象所处状态不同时行为的差异</h2><p>状态图 详细描述对象可能所处的不同状态以及各个状态间的转换</p>
<h1 id="使用UML的好处"><a href="#使用UML的好处" class="headerlink" title="使用UML的好处"></a>使用UML的好处</h1><p>UML主要用于交流，有利于清晰的表达信息，有利于精确的表达信息。</p>
<h1 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h1><p>说明类之间的关系</p>
<ol>
<li>当一种类是“一种”另一个类时：is-a（是一种/一个）关系。</li>
<li>两个类存在关联时<ol>
<li>一个类“包含”另一个类：has-a（拥有一个）关系</li>
<li>一个类“使用”另一个类：use-a（使用一个）关系</li>
<li>一个类“创建”另一个类</li>
</ol>
</li>
</ol>
<p>被包含者是包含者的一部分，<strong>组合</strong>，汽车中的发动机<br>多个东西共同构成一个集合，集合中的东西可以单独存在，<strong>聚合</strong>，雁群和大雁</p>
<p>类图三方面信息：</p>
<ol>
<li>类名</li>
<li>类的数据成员</li>
<li>类的方法</li>
</ol>
<p>表示访问权限的UML记号</p>
<ol>
<li>公开 <code>+</code>号 表示所有对象都可访问的数据或方法</li>
<li>保护 <code>#</code>号 表示该类及其派生类可访问的数据或方法</li>
<li>私有 <code>-</code>号 表示只有该类可以访问的数据或方法</li>
</ol>
<p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuL80WkISnE9Y1USSXMem5mJqz1GAIfDoCfCLddLCU3fnnjF-6I_R-u72S1NQAOOALWef-K1LgLYqlPmxyrb38sxDHd3D2jL0nvHa9jSYcG9dAYS3rILd91R1HNGpWIAPUILm0LjRXB5ffNc66ffe2kBZqHmrRUUppLE1mYZwZC3wol8pKp0TfAiB3usklIysBeIQeAkBOe8ns0Jd72s5wiIaufAYnEGIY14GCY-_95MXA3CzeqJ1wiN-cSzch7-oe-79ZbLFzkv_FcL5GKvY7YX2dhRDV3whvVd6tKzdxtk_f-V9ZjqlbZK-sTtzV7VlixdDBsTE2FNrUR5kmzF-xK1PY3kVJkg1sGVK-cH7xzC9FIyMhdZUju7B8JKl1MWe0000"></p>
<p>表示关系的UML记号</p>
<ol>
<li>继承关系<br> <img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuLA00aS5cnfTNGKd1Ii5f-Uxbp_htE_uVa-FuxFDiv_sJ7kogyr90IBwj7NxaxsJds_S3TVf1TIffwSG2DGP257Z1TGP-7JTlETz6xoWsfvrxNsnSI5CcqDgNWhGSW00"></li>
<li>组合关系<br> <img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuLA00cS5BLrT1HS5AmNdPpFMFv-oqUNvxfPd7HEUpsfvlwV7-MbFwzC9grsURzpzT5utKEpf-fqlDYu4wtP8pKi1cWG0"></li>
<li>聚合关系<br> <img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuLA00bU5V5rT1JS5AmNN5uspdaxeUBAhpUtzdXwtPpFMkpwVrV9aHyFBvXLFEzh0EXnIyrA0kW40"></li>
<li>依赖关系<br> <img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuLA00by5FJqx1Jy5AmNV9_lcljWwxSckFh_tUtfyd-pT_tpA2Z-mGeVKl1IW9W00"></li>
<li>关联关系<br> <img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuLA0WY05FJqxXM05AuMWv_ENlcoS7Fn-Jy-JlMt1JtRqGWI2m6eTKlDIWFe0"></li>
</ol>
<p>一个UML类图实例</p>
<p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuL80WiIaufAYnEGIXUISnE9YXHTxbu65NxIlUh6m1yXJq2ijqAkn0qaeM2aytxtyMUT-i8gdQvSzdp8VAArdXr1jfV1atzmNMwSXgz3DIKqhqSrNUDw_zlckvK13NZJEUZgX0qL9Idvvdgx2Yrshd-pU-s9z8r3HqzRDBngdG1Hjw7-sSIy-jmI7XYdebXRe0kKGYb5TksxkovLh22XwiNVTY-O-1TqYNIqq9Irm1_TFVDgrujcSNK2ZiAjoICrB0GOk0000"></p>
<h1 id="交互图"><a href="#交互图" class="headerlink" title="交互图"></a>交互图</h1><p>表示对象间如何交互的UML图成为交互图，最常用的交互图为顺序图<br><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuN9KqBLJS5AmKaZBB2ekKSWjJkTAJ2x9B4iiILLmud9Iq0LAEmAbYrEJy_DImF8fgKWgu4n7X54PgJav-SZA7B6RcQcU2xGsBrL7eIGZCI-x6DLaXzIy5A0B0G00"><br>顺序图 最上面的矩形都表示一个特定的对象，垂直线表示对象的生命线。垂直线之间的水平线表示对象互相发送消息。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>设计模式解析（第二版）</li>
<li><a href="http://plantuml.com/" target="_blank" rel="noopener">plantuml官网</a></li>
<li><a href="http://keyun.ml/2016/07/25/Tools/plantuml-sequence.html" target="_blank" rel="noopener">plantuml交互图</a></li>
<li><a href="https://yq.aliyun.com/articles/25405" target="_blank" rel="noopener">plantuml类图</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/08/16/design-pattern-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/16/design-pattern-1/" class="post-title-link" itemprop="url">设计模式探秘-1-面向对象</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-16 22:15:00" itemprop="dateCreated datePublished" datetime="2017-08-16T22:15:00+08:00">2017-08-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="面向对象简介"><a href="#面向对象简介" class="headerlink" title="面向对象简介"></a>面向对象简介</h1><h2 id="功能分解"><a href="#功能分解" class="headerlink" title="功能分解"></a>功能分解</h2><p>功能分解是一种处理复杂问题的自然方法。将问题分解为多个功能步骤，再将步骤细分，然后解决更小的问题，将一个复杂问题变为解决多个简单的小问题。<br>功能分解的问题</p>
<ol>
<li>主程序需要负责控制子程序的前后顺序，还要确保整个程序正确工作，<strong>主程序承担了太多功能</strong>。</li>
<li><strong>应对变化的能力弱</strong>，功能的变化需要对整个函数或模块进行修改。</li>
</ol>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>可以在功能分解中模块化问题，将功能划分为一个个模块，模块间再相互调用，在功能需要变化时只需要修改对应的模块即可。模块化可是代码易于理解和维护。<br>模块化的问题是容易<strong>低内聚和紧耦合</strong>。</p>
<p><strong>内聚性描述一个功能内部组成部分之间的紧密程度</strong>。<br><strong>耦合性描述各个模块间的紧密程度</strong>。<br>软件开发的目标应该是创建模块内部完整（<strong>高内聚</strong>），与其它模块间的联系小巧、直接、可见、灵活（<strong>松耦合</strong>）。</p>
<p>如果修改一个函数或函数使用的某个数据对其它函数产生严重破坏。因为<strong>功能分解将主要的精力放在具体的函数中</strong>，对一个函数或函数数据的修改会影响其它函数和数据。</p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>想象一个问题，一个厨子根据工人的反馈决定下顿饭做什么饭。<br>方法一：</p>
<ol>
<li>厨子把可以做的菜列出来。</li>
<li>厨子得到工人名单和住址。</li>
<li>厨子前往工人住处。</li>
<li>厨子询问工人想吃什么菜，并记录下来。</li>
<li>厨子返回。</li>
<li>厨子汇总，找到票数最高的几个菜下顿饭做。</li>
</ol>
<p>方法二：</p>
<ol>
<li>厨子把可以做的菜列出来，张贴起来。</li>
<li>通知工人自行在菜单上选择要吃的菜，并记录。</li>
<li>厨子查看菜单，找到票数最高的几个菜下顿饭做。</li>
</ol>
<p>方法二明显优于方法一，方法一需要关注大量细节、责任繁重，而方法二则简单的多，让工人明白，完成自身的任务。方法二将责任从厨子转移到每一个工人身上，实现<strong>责任的转移</strong>。<br>新需求，要求厨子区分女性工人和男性工人，如果是方法一统计时需要增加一个步骤，区分女性工人和男性工人。而方法二则只需要给出两份菜单即可，女性一份，男性一份。</p>
<p>软件开发过程中的不同视角</p>
<ol>
<li>概念 软件负责什么？ “呈现所研究领域的各种概念，得出概念时应该很少或不考虑实现软件“</li>
<li>规约 怎么使用软件？ 考虑软件的接口，而不是如何实现</li>
<li>实现 软件怎样履行自己的责任？ 考虑代码本身，根据规约实现代码</li>
</ol>
<p>面向对象编程以对象为中心，一切重点集中在对象身上。编写代码围绕对象而非函数进行组织。<br>对象有自己的属性和方法，属性告诉对象自身状态，方法告诉对象如何完成某些功能。</p>
<p>按照Martin Fowler的视角框架观察对象。</p>
<ol>
<li>概念层次，对象是一组责任</li>
<li>规约层次，对象是可被其它对象或者对象自己调用的方法</li>
<li>实现层次，对象是代码和数据，以及对象之间的计算交互</li>
</ol>
<p>对象具有供其它对象调用的公共接口。<br>围绕类组织对象，类是对对象行为的定义，包含对象的数据元素、对象能够操作的方法、访问数据元素和方法的方式。对象可以拥有不同的数据，但拥有相同的功能。<br>对象是类的实例。</p>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><p>抽象类定义其它相关类的一般属性。例如抽象类学生，定义了学生的一般属性。<br>代表了某种类型的相关行为的类成为具体类，因为它代表一个概念既定、不变的实现。例如，本科生和研究生就是具体类，而学生则是抽象类。<br>抽象类和具体类是一种<code>is-a</code>（是一种）的关系，称之为继承。例如本科生继承学生类，研究生继承学生类。<br>抽象类可以定义派生类必须实现的公共方法。派生类使用抽象类的默认行为还是自己重新定义由派生类自身决定。<br>如果抽象类只提供规约而不提供实现，则是接口。</p>
<h2 id="类的访问控制"><a href="#类的访问控制" class="headerlink" title="类的访问控制"></a>类的访问控制</h2><p>对象对自己负责，有很多东西是自己私有的，不能暴露给其它对象，所以需要访问控制。</p>
<ol>
<li>公开 public 任何对象可见</li>
<li>保护 protected 自身和派生类对象可见</li>
<li>私有 private 自身可见</li>
</ol>
<h2 id="类的封装"><a href="#类的封装" class="headerlink" title="类的封装"></a>类的封装</h2><p>类的属性控制，达到隐藏数据的目的，实现数据的封装，但类的封装不只是数据封装，而是各种隐藏。</p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>多态，抽象引用概念性的要求对象做什么，对于不同的派生对象有不同的实现方式。</p>
<h2 id="特殊的对象方法"><a href="#特殊的对象方法" class="headerlink" title="特殊的对象方法"></a>特殊的对象方法</h2><ol>
<li>构造方法 负责初始化或创建一个对象</li>
<li>析构方法 负责清除一个对象</li>
</ol>
<h2 id="概念回顾"><a href="#概念回顾" class="headerlink" title="概念回顾"></a>概念回顾</h2><ol>
<li>功能分解 结构化程序员总是使用功能分解进行程序设计。功能分解是将一个问题逐渐分解为更小功能的方法,每个函数都分解到可管理为止</li>
<li>需求变更 需求变更是开发过程中与生俱来的。与其向用户或者自己抱怨获得理想而且完整的需求看来是不可能完成的任务”,不如使用更有效的开发方法,应对需求变更</li>
<li>对象 对象是由其责任定义的。对象能够自己负责自己,从而简化了使用对象的控制程序的任务</li>
<li><p>构造函数和析构函数 对象具有在创建和销毁自己时自动调用的特殊方法。这些特殊方法是:</p>
<ol>
<li>构造函数:初始化或创建对象</li>
<li>析构函数:在对象删除时清除对象</li>
<li>所有面向对象语言都使用构造函数和析构函数辅助对对象的管理</li>
</ol>
</li>
<li><p>抽象类 定义了概念上相似的一组类的方法和公共属性。抽象类不能实例化</p>
</li>
<li>属性 与对象关联的数据(也称为数据成员,data member)</li>
<li>类 对象的蓝图——为其类型的对象定义方法和数据</li>
<li>构造函数 在创建对象时调用的特殊方法</li>
<li>派生类 从基类特化的类,包含基类所有的属性和方法,但还可能包含其他属性或不同的方法实现</li>
<li>析构函数 在销毁对象时调用的特殊方法</li>
<li>封装 任何形式的隐藏。对象封装其数据,抽象类封装其派生的具体类</li>
<li>功能分解 一种分析方法,将问题逐步分解成小的功能</li>
<li>继承 一种特化类的方式,用于将派生类与其基类联系起来</li>
<li>实例 类的特定对象</li>
<li>实例化 创建类的一个实例的过程</li>
<li>成员 类的数据或方法</li>
<li>方法 与对象关联的例程</li>
<li>对象 具有责任的实体。一个特殊的、自成一体的容器,包含数据和操作数据的方法。对象的数据对于外部对象是受保护的</li>
<li>多态 相关的对象根据其具体类型实现方法的能力</li>
<li>超类 其他的类从中派生的类,包含所有派生类都要使用的主要数据和方法的定义(方法可能改写)</li>
</ol>
<h1 id="参考书籍"><a href="#参考书籍" class="headerlink" title="参考书籍"></a>参考书籍</h1><ul>
<li>设计模式解析（第二版）</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/08/02/python26-update-python27/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/02/python26-update-python27/" class="post-title-link" itemprop="url">Centos python2.6 升级 python2.7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-08-02 19:21:00" itemprop="dateCreated datePublished" datetime="2017-08-02T19:21:00+08:00">2017-08-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Centos-python2-6-升级-python2-7"><a href="#Centos-python2-6-升级-python2-7" class="headerlink" title="Centos python2.6 升级 python2.7"></a>Centos python2.6 升级 python2.7</h1><h2 id="安装python2-7"><a href="#安装python2-7" class="headerlink" title="安装python2.7"></a>安装python2.7</h2><ol>
<li><p>下载python2.7源码，解压</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz</span><br><span class="line">tar xvf Python-2.7.13.tgz</span><br><span class="line">cd Python-2.7.13</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装，默认安装位置为/usr/local/bin/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>替换python2.6，建立python2.7软链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/bin/</span><br><span class="line">sudo ln -s /usr/local/python27/bin/python2.7 python2.7</span><br><span class="line">sudo ln -s /usr/local/python27/bin/python2.7-config python2.7-config</span><br><span class="line">sudo mv python python.back</span><br><span class="line">sudo ln -s python2.7 python</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><ol>
<li><p>yum不支持python2.7，修改下，让其直接调用python2.6，如果有别的工具也不支持python2.7，方法相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/bin/yum</span><br><span class="line">将第一行#!/usr/bin/python 修改为#!/usr/bin/python2.6</span><br></pre></td></tr></table></figure>
</li>
<li><p>为python2.7安装<code>easy_install</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget wget -q http://peak.telecommunity.com/dist/ez_setup.py</span><br><span class="line">sudo python ez_setup.py -U setuptools</span><br></pre></td></tr></table></figure>
</li>
<li><p>为python2.7安装pip，在<a href="https://pypi.python.org/pypi/pip/9.0.1" target="_blank" rel="noopener">https://pypi.python.org/pypi/pip/9.0.1 下载pip源码</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf pip-9.0.1.tar.gz</span><br><span class="line">cd pip-9.0.1</span><br><span class="line">python setup.py build</span><br><span class="line">sudo python setup.py install</span><br><span class="line">sudo ln -s /usr/local/python27/bin/pip2.7 /usr/bin/pip2.7</span><br><span class="line">cd /usr/bin/</span><br><span class="line">sudo mv pip pip.back</span><br><span class="line">sudo ln -s pip2.7  pip</span><br></pre></td></tr></table></figure>
</li>
<li><p>python2.7命令行不可用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install readline</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/07/29/shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/29/shell/" class="post-title-link" itemprop="url">Shell脚本学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-29 12:20:00" itemprop="dateCreated datePublished" datetime="2017-07-29T12:20:00+08:00">2017-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="shell特性"><a href="#shell特性" class="headerlink" title="shell特性"></a>shell特性</h1><h2 id="查看历史命令history"><a href="#查看历史命令history" class="headerlink" title="查看历史命令history"></a>查看历史命令history</h2><p>shell中history命令可以查看历史命令，默认保存1024条历史命令记录。<br>shell中使用!!自动执行上一条历史命令。<br>shell中使用!num表示执行第num条历史命令。<br>shell中使用!str表示执行最近的以str开头的命令。</p>
<h2 id="alias-和-unalias"><a href="#alias-和-unalias" class="headerlink" title="alias 和 unalias"></a>alias 和 unalias</h2><p>alias给一条命令设置别名，简化操作。unalias取消别名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@home Study]$ alias myls=&quot;ls -la&quot;</span><br><span class="line">[CaseZheng@home Study]$ myls</span><br><span class="line">总用量 44</span><br><span class="line">drwxrwxr-x.  9 CaseZheng CaseZheng 4096 7月  26 23:14 .</span><br><span class="line">drwx------. 29 CaseZheng CaseZheng 4096 7月  29 11:49 ..</span><br><span class="line">drwxrwxr-x.  5 CaseZheng CaseZheng 4096 6月   5 22:52 BoostStudy</span><br><span class="line">drwxrwxr-x.  8 CaseZheng CaseZheng 4096 7月  29 11:52 .git</span><br><span class="line">-rw-rw-r--.  1 CaseZheng CaseZheng   41 6月   3 22:00 .gitignore</span><br><span class="line">drwxrwxr-x.  2 CaseZheng CaseZheng 4096 6月   3 22:00 Lua_C_Server_Client</span><br><span class="line">drwxrwxr-x.  2 CaseZheng CaseZheng 4096 6月  26 23:03 Mahjong</span><br><span class="line">drwxrwxr-x.  2 CaseZheng CaseZheng 4096 7月  27 22:55 Python</span><br><span class="line">-rw-rw-r--.  1 CaseZheng CaseZheng    8 6月   3 22:00 README.md</span><br><span class="line">drwxrwxr-x.  3 CaseZheng CaseZheng 4096 6月   3 22:00 Redis_Lua</span><br><span class="line">drwxrwxr-x.  3 CaseZheng CaseZheng 4096 7月  27 22:55 WebStudy</span><br><span class="line">[CaseZheng@home Study]$ unalias myls</span><br><span class="line">[CaseZheng@home Study]$ myls</span><br><span class="line">bash: myls: 未找到命令...</span><br><span class="line">[CaseZheng@home Study]$</span><br></pre></td></tr></table></figure></p>
<h2 id="gt-gt-gt-lt"><a href="#gt-gt-gt-lt" class="headerlink" title="&gt; &gt;&gt; &lt;"></a>&gt; &gt;&gt; &lt;</h2><p><code>&gt;</code>      重定向<br><code>&gt;&gt;</code>    追加<br><code>&lt;</code>      反向重定向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@home ~]$ echo &quot;hello shell&quot; &gt; hello.txt</span><br><span class="line">[CaseZheng@home ~]$ cat hello.txt</span><br><span class="line">hello shell</span><br><span class="line">[CaseZheng@home ~]$ echo &quot;hello clear&quot; &gt; hello.txt</span><br><span class="line">[CaseZheng@home ~]$ cat hello.txt</span><br><span class="line">hello clear</span><br><span class="line">[CaseZheng@home ~]$ echo &quot;hello append&quot; &gt;&gt; hello.txt</span><br><span class="line">[CaseZheng@home ~]$ cat hello.txt</span><br><span class="line">hello clear</span><br><span class="line">hello append</span><br><span class="line">[CaseZheng@home ~]$</span><br></pre></td></tr></table></figure>
<p><code>2&gt;</code>    错误重定向<br><code>2&gt;&gt;</code>   错误追加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@home ~]$ ls hahaha</span><br><span class="line">ls: 无法访问&apos;hahaha&apos;: No such file or directory</span><br><span class="line">[CaseZheng@home ~]$ ls hahaha 2&gt; log.txt</span><br><span class="line">[CaseZheng@home ~]$ cat log.txt</span><br><span class="line">ls: 无法访问&apos;hahaha&apos;: No such file or directory</span><br><span class="line">[CaseZheng@home ~]$ ls 2&gt; log.txt</span><br><span class="line">Blog  hello.txt  log.txt  Package  PythonWeb  SourceCodeAnalysis  Study  桌面</span><br><span class="line">[CaseZheng@home ~]$ cat log.txt</span><br><span class="line">[CaseZheng@home ~]$</span><br></pre></td></tr></table></figure>
<h1 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h1><ol>
<li><code>#!/bin/sh</code> <code>#!/bin/bash</code> 写在shell脚本第一行 指名脚本解释执行的解释器</li>
<li><code>#</code> 除第一行以<code>#!</code>开头有特殊用途外 其它以<code>#</code>开头的行均为注释</li>
<li>chmod a+x xxx.sh 给xxx.sh增加执行权限</li>
<li>bash -x xxx.sh 查看xxx.sh的执行过程</li>
</ol>
<h1 id="date"><a href="#date" class="headerlink" title="date"></a>date</h1><p>打印或设置系统日期和时间</p>
<h1 id="shell变量"><a href="#shell变量" class="headerlink" title="shell变量"></a>shell变量</h1><p>注意等于号左右不能有空格<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">test=&quot;test str&quot;</span><br><span class="line">echo $test</span><br><span class="line">echo $&#123;test&#125;    # 花括号可以帮助解释器识别变量边界</span><br></pre></td></tr></table></figure></p>
<p>unset 命令可以删除变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">test=&quot;test str&quot;</span><br><span class="line">unset test</span><br><span class="line">echo $test</span><br></pre></td></tr></table></figure></p>
<p>readonly 命令使变量只读 unset不能删除只读变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">readonly a=10</span><br><span class="line">a=20</span><br><span class="line">[CaseZheng@localhost ~]$ bash -x test.sh</span><br><span class="line">+ readonly a=10</span><br><span class="line">+ a=10</span><br><span class="line">+ a=20</span><br><span class="line">test.sh:行3: a: 只读变量</span><br></pre></td></tr></table></figure></p>
<h1 id="shell读取命令行参数"><a href="#shell读取命令行参数" class="headerlink" title="shell读取命令行参数"></a>shell读取命令行参数</h1><ol>
<li>$0 命令本身</li>
<li>$1 $2 $3 以此为参数1 2 3</li>
<li>$# 参数个数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">echo $0</span><br><span class="line">echo $1</span><br><span class="line">echo $2</span><br><span class="line">echo $3</span><br><span class="line">echo $#</span><br><span class="line">[CaseZheng@localhost ~]$ ./test.sh 10 11 12 13 14 15</span><br><span class="line">./test.sh</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">6</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="从屏幕读入"><a href="#从屏幕读入" class="headerlink" title="从屏幕读入"></a>从屏幕读入</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">read -p &quot;请输入&quot; num</span><br><span class="line">echo $num</span><br><span class="line">[CaseZheng@localhost ~]$ ./test.sh</span><br><span class="line">请输入4</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<h1 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">a=1;</span><br><span class="line">b=2;</span><br><span class="line">echo $a+$b          # 字符串连接</span><br><span class="line">echo $[$a+$b]       # 算术运算</span><br><span class="line">echo $(($a+$b))     # 算术运算</span><br><span class="line">[CaseZheng@localhost ~]$ ./test.sh</span><br><span class="line">1+2</span><br><span class="line">3</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h1 id="数字比较"><a href="#数字比较" class="headerlink" title="数字比较"></a>数字比较</h1><ol>
<li>-eq 相等（equal）</li>
<li>-ne 不等（not equal）</li>
<li>-gt 大于（greater than）</li>
<li>-lt 小于（less than）</li>
<li>-ge 大于等于 （greater than or equal）</li>
<li>-le 小于等于 （less than or equal）</li>
</ol>
<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">if [ 1 -eq 1 ]     # 方括号两边都要有空格 == 两边加空格</span><br><span class="line">then</span><br><span class="line">    echo &quot;true&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if [ 1 -eq 2 ]     # 方括号两边都要有空格 == 两边加空格</span><br><span class="line">then</span><br><span class="line">    echo &quot;true&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;false&quot;</span><br><span class="line">fi</span><br><span class="line">[CaseZheng@localhost ~]$ bash -x test.sh</span><br><span class="line">+ &apos;[&apos; 1 -eq 1 &apos;]&apos;</span><br><span class="line">+ echo true</span><br><span class="line">true</span><br><span class="line">+ &apos;[&apos; 1 -eq 2 &apos;]&apos;</span><br><span class="line">+ echo false</span><br><span class="line">false</span><br><span class="line">[CaseZheng@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">if [ 1 -eq 2 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;true 1==2&quot;</span><br><span class="line">elif [ 1 -lt 2 ]    # 小于等于</span><br><span class="line">then</span><br><span class="line">    echo &quot;true 1&lt;2&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;false&quot;</span><br><span class="line">fi</span><br><span class="line">[CaseZheng@localhost ~]$ bash -x test.sh</span><br><span class="line">+ &apos;[&apos; 1 -eq 2 &apos;]&apos;</span><br><span class="line">+ &apos;[&apos; 1 -lt 2 &apos;]&apos;</span><br><span class="line">+ echo &apos;true 1&lt;2&apos;</span><br><span class="line">true 1&lt;2</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/07/22/cplusplus-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/22/cplusplus-review/" class="post-title-link" itemprop="url">C++复习学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-22 15:18:00" itemprop="dateCreated datePublished" datetime="2017-07-22T15:18:00+08:00">2017-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="复习到的知识点"><a href="#复习到的知识点" class="headerlink" title="复习到的知识点"></a>复习到的知识点</h1><h2 id="1-C-三种编程方式"><a href="#1-C-三种编程方式" class="headerlink" title="1. C++三种编程方式"></a>1. C++三种编程方式</h2><ol>
<li>面向过程编程</li>
<li>面向对象编程</li>
<li>C++模板支持的泛型编程</li>
</ol>
<h2 id="2-注释"><a href="#2-注释" class="headerlink" title="2. 注释"></a>2. 注释</h2><p>C++的注释为//，C的为<code>/*...*/</code>，C++可以识别<code>/*...*/</code>，C99将//注释加入到C标准</p>
<h2 id="3-名词空间"><a href="#3-名词空间" class="headerlink" title="3. 名词空间"></a>3. 名词空间</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;        <span class="comment">//只将std名字空间下的cout暴露出来</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;    <span class="comment">//将std名字空间的下所有标识符暴露出来</span></span><br></pre></td></tr></table></figure>
<h2 id="4-函数"><a href="#4-函数" class="headerlink" title="4. 函数"></a>4. 函数</h2><ol>
<li>函数头 指出函数返回值的类型和函数期望通过参数传递给它的信息的类型</li>
<li>函数体 由花括号中的C++语句组成</li>
</ol>
<h2 id="5-C-语句"><a href="#5-C-语句" class="headerlink" title="5. C++语句"></a>5. C++语句</h2><ol>
<li>声明语句 定义变量的名称和类型</li>
<li>赋值语句 使用赋值运算符给变量赋值</li>
<li>消息语句 将消息发送给对象，激发某种行动</li>
<li>函数调用 执行函数。被调用的函数执行完毕后，程序返回到函数调用语句后面的语句</li>
<li>函数原型 申明函数的返回类型、函数接受的参数数量和类型</li>
<li>返回语句 将一个值从被调用的函数返回到调用函数中</li>
</ol>
<h2 id="6-C-命名规则"><a href="#6-C-命名规则" class="headerlink" title="6. C++命名规则"></a>6. C++命名规则</h2><ol>
<li>在名称中只能使用字母字符、数字和下划线</li>
<li>名称的第一个字符不能是数字</li>
<li>区分大写字符和小写字符</li>
<li>不能将C++关键字作为名称</li>
<li>以两个下划线或下划线和大写字母开头的名称被保留给实现（编译器和其使用的资源）使用。以一个下划线开头的名称被保留给实现，用作全局标识符</li>
<li>C++对于名称的长度没有限制，名称中所有字符都有意义，但有些平台有长度限制（和C标准有所区别C标准只保证前63个字符有意义 ps:gcc6.3.1下使用长度超过63且前63个字符相同的两个变量测未出现错误）</li>
</ol>
<h2 id="7-climits"><a href="#7-climits" class="headerlink" title="7. climits"></a>7. climits</h2><p>头文件定义了符号常量表示类型的限制<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *args[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// g++ 6.3.1 fedora25 64位 linux</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="keyword">sizeof</span> LLONG_MAX&lt;&lt;<span class="built_in">endl</span>;   <span class="comment">//8</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="keyword">sizeof</span> SHRT_MAX&lt;&lt;<span class="built_in">endl</span>;    <span class="comment">//4</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="keyword">sizeof</span> INT_MAX&lt;&lt;<span class="built_in">endl</span>;     <span class="comment">//4</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="keyword">sizeof</span> LONG_MAX&lt;&lt;<span class="built_in">endl</span>;    <span class="comment">//8</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="8-const与-define优先使用const"><a href="#8-const与-define优先使用const" class="headerlink" title="8. const与#define优先使用const"></a>8. const与#define优先使用const</h2><ol>
<li>const可指定类型</li>
<li>const可设定作用域</li>
<li>cosnt可用于更复杂的类型</li>
</ol>
<h2 id="9-C-中const变量可用来申明数组长度（C语言不可以）"><a href="#9-C-中const变量可用来申明数组长度（C语言不可以）" class="headerlink" title="9. C++中const变量可用来申明数组长度（C语言不可以）"></a>9. C++中const变量可用来申明数组长度（C语言不可以）</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用g++可以编译通过，使用gcc会报错</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> arraylen = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[arraylen] =&#123;<span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="10-基础类型，整数和浮点数"><a href="#10-基础类型，整数和浮点数" class="headerlink" title="10. 基础类型，整数和浮点数"></a>10. 基础类型，整数和浮点数</h2><h2 id="11-类型转换"><a href="#11-类型转换" class="headerlink" title="11. 类型转换"></a>11. 类型转换</h2><ol>
<li>初始化和赋值进行的转换</li>
<li>以{}方式初始化时进行的转换（C++11）</li>
<li>表达式中的转换</li>
<li>传递参数时进行的转换</li>
<li>强制类型转换</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(typename) value;       //C语言风格</span><br><span class="line">typename(value);        //C++</span><br><span class="line">static_cast&lt;typename&gt; (value);  //C++四种强制类型转换运算符，static_cast是其中一种可用于将数值类型转换为另一种数值类型，比传统强制类型转换更严格</span><br></pre></td></tr></table></figure>
<h2 id="12-C-11中auto申明，使用关键字auto，不指定变量类型，编译器将把变量的类型设置成与初始值相同"><a href="#12-C-11中auto申明，使用关键字auto，不指定变量类型，编译器将把变量的类型设置成与初始值相同" class="headerlink" title="12. C++11中auto申明，使用关键字auto，不指定变量类型，编译器将把变量的类型设置成与初始值相同"></a>12. C++11中auto申明，使用关键字auto，不指定变量类型，编译器将把变量的类型设置成与初始值相同</h2><h2 id="13-结构体struct、共用体union、枚举enum"><a href="#13-结构体struct、共用体union、枚举enum" class="headerlink" title="13. 结构体struct、共用体union、枚举enum"></a>13. 结构体struct、共用体union、枚举enum</h2><h2 id="14-位字段，可使用按位运算替代这种方法"><a href="#14-位字段，可使用按位运算替代这种方法" class="headerlink" title="14. 位字段，可使用按位运算替代这种方法"></a>14. 位字段，可使用按位运算替代这种方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">struct torgle_register</span><br><span class="line">&#123;</span><br><span class="line">    unsigned int SN : 4;</span><br><span class="line">    unsigned int : 4;   //表示有4个位未使用</span><br><span class="line">    bool goodIn : 1;</span><br><span class="line">    bool goodTorgle : 1;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="15-使用new和delete应遵守的规则"><a href="#15-使用new和delete应遵守的规则" class="headerlink" title="15. 使用new和delete应遵守的规则"></a>15. 使用new和delete应遵守的规则</h2><ol>
<li>不要使用delete来释放不是new分配的内存</li>
<li>不用使用delete释放同一块内存块两次</li>
<li>如果使用new[]为数组分配内存，应使用delete[]来使用</li>
<li>使用new[]为一个实体分配内存，则应使用delete（没有方括号）来释放</li>
<li>对空指针使用delete是安全的</li>
</ol>
<h2 id="16-C-三种管理数据内存的方式"><a href="#16-C-三种管理数据内存的方式" class="headerlink" title="16. C++三种管理数据内存的方式"></a>16. C++三种管理数据内存的方式</h2><ol>
<li>自动存储，栈上的临时变量</li>
<li>静态存储，整个程序执行期间都存在，static变量，全局变量</li>
<li>动态存储，堆，new和delete</li>
</ol>
<h2 id="17-STL模板类vector是动态数组的替代品，C-11模板类array是定长数组的替代品"><a href="#17-STL模板类vector是动态数组的替代品，C-11模板类array是定长数组的替代品" class="headerlink" title="17. STL模板类vector是动态数组的替代品，C++11模板类array是定长数组的替代品"></a>17. STL模板类vector是动态数组的替代品，C++11模板类array是定长数组的替代品</h2><h2 id="18-类型别名"><a href="#18-类型别名" class="headerlink" title="18. 类型别名"></a>18. 类型别名</h2><ol>
<li>预处理器<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BYTE char</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>编译阶段用char替换所有的BYTE</p>
<ol>
<li>typedef（C++、C关键字）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef char BYTE;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>typedef不会创建新类型，只是为已有类型创建新的名称。</p>
<h2 id="19-数组指针、指针数组"><a href="#19-数组指针、指针数组" class="headerlink" title="19. 数组指针、指针数组"></a>19. 数组指针、指针数组</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (*p)[<span class="number">4</span>];    <span class="comment">//数组指针，指向一个数组的指针</span></span><br><span class="line"><span class="keyword">int</span> *q[<span class="number">3</span>];      <span class="comment">//指针数组，包含指针的数组</span></span><br></pre></td></tr></table></figure>
<h2 id="20-函数指针，是一个指针，指向一个函数"><a href="#20-函数指针，是一个指针，指向一个函数" class="headerlink" title="20. 函数指针，是一个指针，指向一个函数"></a>20. 函数指针，是一个指针，指向一个函数</h2><h2 id="21-内联函数"><a href="#21-内联函数" class="headerlink" title="21. 内联函数"></a>21. 内联函数</h2><p>inline关键字，类联函数将使用相应函数代码替换函数调用，程序无需跳转到另一位值执行代码，提高运行速度，但需要占用更多内存，内联函数只是对编译器的建议，如果函数定义占用太多行，则不会被内联。C语言使用#define可以实现函数内联，但由于#define只是代码替换会引发问题，所以应尽量使用inline。</p>
<ol>
<li>函数声明前加上关键字inline</li>
<li>函数定义前加上关键字inline</li>
</ol>
<h2 id="22-左值引用-amp"><a href="#22-左值引用-amp" class="headerlink" title="22. 左值引用&amp;"></a>22. 左值引用&amp;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int a = 0;</span><br><span class="line">int &amp;b = a;     //b成为a的一个别名，对b的操作相当于操作b    int *const b = &amp;a;</span><br><span class="line">b = 10;         //*b = 10;</span><br></pre></td></tr></table></figure>
<h2 id="23-默认参数"><a href="#23-默认参数" class="headerlink" title="23. 默认参数"></a>23. 默认参数</h2><p>对于带参数列表的函数，必须从右向左添加默认值。即，要为某个参数设置默认值，其右边的所有参数都必须提供默认值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z=<span class="number">0</span>, <span class="keyword">int</span> w=<span class="number">0</span>)</span></span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="24-函数重载"><a href="#24-函数重载" class="headerlink" title="24. 函数重载"></a>24. 函数重载</h2><p>函数重载的关键是函数的参数列表，称为函数特征标，和其返回值无关，和参数列表中参数的变量名也无关。<br>编译器在检查函数特征标时，把类型引用和其本身视为同一个特征标。</p>
<h2 id="25-函数模板"><a href="#25-函数模板" class="headerlink" title="25. 函数模板"></a>25. 函数模板</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Type&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(Type &amp;a, Type &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Type temp;</span><br><span class="line">    temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>模板函数也可以重载<br>函数模板特化<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Job</span>&#123;</span></span><br><span class="line">    Job &amp; <span class="keyword">operator</span> =(Job <span class="keyword">const</span> &amp;r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;Job;</span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(Job &amp;a, Job &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Job <span class="title">temp</span><span class="params">(a)</span></span>;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>函数模板偏特化是不可以的，可以使用函数重载实现</p>
<h2 id="26-说明符和限定符"><a href="#26-说明符和限定符" class="headerlink" title="26. 说明符和限定符"></a>26. 说明符和限定符</h2><ol>
<li><p>auto C++11之前在申明中使用，指明变量为自动变量，但在C++11中auto用于自动类型推断</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> <span class="keyword">int</span> x = <span class="number">10</span>;    <span class="comment">//C++11中编译错误，C中可编译通过  指明x为自动变量即存放在栈上</span></span><br><span class="line"><span class="keyword">auto</span> y = <span class="number">10</span>;        <span class="comment">//C++11中编译通过</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>register 声明将变量存储到寄存器中，C++11中只是显示指出变量是自动的</p>
</li>
<li>static<ol>
<li>限制全局变量或函数的作用域</li>
<li>申明某个变量为静态变量</li>
<li>用于类函数</li>
</ol>
</li>
<li>extern 声明是引用声明，即声明引用在其它地方定义的变量</li>
<li>mutable 即使变量所在的类或结构体变量为const，其用mutable修饰的变量仍可被修改</li>
<li>const 被其修饰的变量不可改变</li>
<li>volatile 禁止编译器对某个变量进行优化，每次都去内存中取值，不使用寄存器中的缓存值</li>
</ol>
<h2 id="27-new、delete的用法"><a href="#27-new、delete的用法" class="headerlink" title="27. new、delete的用法"></a>27. new、delete的用法</h2><ol>
<li><p>常用的用于创建对象并初始化的new，如果失败抛出异常<code>std::bad_alloc</code></p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> *str = <span class="keyword">new</span> <span class="built_in">string</span>(<span class="string">"abc"</span>);</span><br><span class="line"><span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>常用的用于创建对象并初始化的new，如果失败不抛出异常返回NULL</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *arr1 = <span class="keyword">new</span>() <span class="keyword">int</span>[<span class="number">10000000000</span>];             <span class="comment">//抛出std::bad_alloc</span></span><br><span class="line"><span class="keyword">int</span> *arr2 = <span class="keyword">new</span>(nothrow) <span class="keyword">int</span>[<span class="number">10000000000</span>];      <span class="comment">//不抛出异常，返回NULL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用于申明空间，类似malloc</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> *p = <span class="keyword">operator</span> <span class="keyword">new</span>(<span class="number">10000000000</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));    <span class="comment">//失败抛出std::bad_alloc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在已有空间上构建对象</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">void *p = operator new(sizeof(int));</span><br><span class="line">int *a = new(p) int(10);</span><br></pre></td></tr></table></figure>
</li>
<li><p>析构对象并释放空间</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string *str = new string(&quot;abc&quot;);</span><br><span class="line">delete str;</span><br><span class="line">int *arr = new int[4];</span><br><span class="line">delete[] arr;</span><br></pre></td></tr></table></figure>
</li>
<li><p>释放空间</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">void *p = operator new(10 * sizeof(int));    //失败抛出std::bad_alloc</span><br><span class="line">operator delete p;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="28-名字空间（名称空间、命名空间）namespace"><a href="#28-名字空间（名称空间、命名空间）namespace" class="headerlink" title="28. 名字空间（名称空间、命名空间）namespace"></a>28. 名字空间（名称空间、命名空间）namespace</h2><h2 id="29-类-class"><a href="#29-类-class" class="headerlink" title="29. 类 class"></a>29. 类 class</h2><p>多态、继承、封装和数据隐藏、代码可重用、抽象</p>
<ol>
<li>访问控制 public protected private</li>
<li>方法 内联方法（inline）</li>
<li>构造方法、析构方法、拷贝构造函数、等号运算符重载函数、取址运算符重载函数、取址运算符重载函数const版本(编译器会自动生成它们的默认版本)</li>
<li>C++11列表初始化也可用于类</li>
<li>const成员函数 函数内部不可修改成员变量的值，const修饰的变量和非const变量都可调用，const修饰的变量无法调用非const成员函数</li>
<li>this指针，在成员函数中默认传入</li>
<li>static修饰的成员函数，不会传入this指针，只能访问类中staitc成员变量</li>
</ol>
<h2 id="30-运算符重载"><a href="#30-运算符重载" class="headerlink" title="30. 运算符重载"></a>30. 运算符重载</h2><p>重载限制</p>
<ol>
<li>重载后的运算符必须至少有一个操作数为用户自定义类型，防止用户为标准类型重载运算符。</li>
<li>使用运算符不能违反运算符原来的句法规则。不能改变优先级</li>
<li>不能创建新运算符。</li>
<li>不能重载部分运算符。<ol>
<li>sizeof</li>
<li>.        成员运算符</li>
<li><code>.*</code>      成员指针运算符</li>
<li><code>::</code>       作用域解析运算符</li>
<li><code>?:</code></li>
<li>typeid</li>
<li><code>const_cast</code></li>
<li><code>dynamic_cast</code></li>
<li><code>reinterpret_cast</code></li>
<li><code>static_cast</code></li>
</ol>
</li>
<li>部分运算符只能通过成员函数进行重载。<code>=</code>、<code>()</code>、<code>[]</code>、<code>-&gt;</code>。</li>
</ol>
<h2 id="31-友元-friend"><a href="#31-友元-friend" class="headerlink" title="31. 友元 friend"></a>31. 友元 friend</h2><p>让外部的函数、类、成员方法可以访问本类的私有变量和方法</p>
<ol>
<li>友元函数</li>
<li>友元类</li>
<li>友元成员函数</li>
</ol>
<h2 id="32-类的自动转化和强制类型转换"><a href="#32-类的自动转化和强制类型转换" class="headerlink" title="32. 类的自动转化和强制类型转换"></a>32. 类的自动转化和强制类型转换</h2><ol>
<li>隐式类型转换，在只接受一个参数的构造方法前使用关键字explicit限定，可禁止隐式类型转换</li>
<li>显式类型转换</li>
<li>将类对象转化为其他类型，转换函数，特殊类成员运算符函数</li>
</ol>
<h2 id="33-类构造函数初始化列表"><a href="#33-类构造函数初始化列表" class="headerlink" title="33. 类构造函数初始化列表"></a>33. 类构造函数初始化列表</h2><p>类构造函数初始化列表初始化成员变量，顺序与初始化器中的排列顺序无关，与出现在类申明中的顺序相同。</p>
<h2 id="34-继承"><a href="#34-继承" class="headerlink" title="34. 继承"></a>34. 继承</h2><p>继承是is-a的关系<br>派生类继承基类的方法和属性</p>
<ol>
<li>公有继承</li>
<li>保护继承</li>
<li>私有继承</li>
</ol>
<p>虚方法、纯虚方法<br>虚析构函数，确保正确的析构函数序列被调用<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Basic</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Basic() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Basic"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~Basic() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"~Basic"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;  <span class="comment">//如果不使用virtual pB在析构时将不会调用~Child</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> :</span> <span class="keyword">public</span> Basic</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Child() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Child"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~Child() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"~Child"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Child *pC = <span class="keyword">new</span> Child();</span><br><span class="line">    Basic *pB = <span class="keyword">dynamic_cast</span>&lt;Basic*&gt;(pC);</span><br><span class="line">    <span class="keyword">delete</span> pB;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>虚方法会被加入到虚函数表中。如果派生类提供了虚函数的新定义，则虚函数表将保存新函数的地址。当派生类对象调用虚函数时就会调用派生类的新定义的虚函数了。<br>非虚函数在编译时即可得到其调用函数的地址，虚函数则要在运行时才去找需要调用函数的地址。<br>有纯虚方法的类，不能用来创建对象。<br>C++支持多重继承。<br>虚继承。避免多重继承继承了多个基类对象的问题。</p>
<h2 id="35-模板类"><a href="#35-模板类" class="headerlink" title="35. 模板类"></a>35. 模板类</h2><ol>
<li>正常模板类</li>
<li>类的特化</li>
<li>类的偏特化</li>
</ol>
<h2 id="36-异常"><a href="#36-异常" class="headerlink" title="36. 异常"></a>36. 异常</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(exception &amp; ex)       <span class="comment">//捕获异常</span></span><br><span class="line">&#123;</span><br><span class="line">    ...                     <span class="comment">//处理异常</span></span><br><span class="line">    <span class="keyword">throw</span> ex;               <span class="comment">//抛出异常</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="37-RTTI运行阶段类别识别"><a href="#37-RTTI运行阶段类别识别" class="headerlink" title="37. RTTI运行阶段类别识别"></a>37. RTTI运行阶段类别识别</h2><ol>
<li>如果可能的话，<code>dynamic_cast</code>运算符将使用一个指向基类的指针来生成一个指向派生类的指针，否则返回空指针。</li>
<li>typeid运算符返回一个指出对象的类型的值。</li>
<li><code>type_info</code>结果存储有关特定类型的信息。</li>
</ol>
<p>只能将RTTI用于包含虚函数的类层次结构，因为只有对于这种类层次机构，才能将派生对象的地址赋给基类指针。RTTI只适用于包含虚函数的类。</p>
<h2 id="38-类型转化运算符"><a href="#38-类型转化运算符" class="headerlink" title="38. 类型转化运算符"></a>38. 类型转化运算符</h2><ol>
<li><code>dynamic_cast</code>    在类层级结构中进行向上转换，而不允许其他转换</li>
<li><code>const_cast</code>      改变值为const或volatile</li>
<li><code>static_cast</code></li>
<li><code>reinterpret_cast</code></li>
</ol>
<h1 id="新学的C-11新知识"><a href="#新学的C-11新知识" class="headerlink" title="新学的C++11新知识"></a>新学的C++11新知识</h1><h2 id="1-C-11初始化方式"><a href="#1-C-11初始化方式" class="headerlink" title="1. C++11初始化方式"></a>1. C++11初始化方式</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">//花括号用于数组、结构体初始化</span></span><br><span class="line"><span class="keyword">int</span> x1 = &#123;<span class="number">24</span>&#125;;      <span class="comment">//C++98也可用于单值变量</span></span><br></pre></td></tr></table></figure>
<p>C++11 新方式<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x2&#123;<span class="number">7</span>&#125;;      <span class="comment">//变量初始化为7</span></span><br><span class="line"><span class="keyword">int</span> x3 = &#123;<span class="number">7</span>&#125;;   <span class="comment">//变量初始化为7</span></span><br><span class="line"><span class="keyword">int</span> x4&#123;&#125;;       <span class="comment">//变量初始化为0</span></span><br><span class="line"><span class="keyword">int</span> x5 = &#123;&#125;;    <span class="comment">//变量初始化为0</span></span><br></pre></td></tr></table></figure></p>
<p>C++11使得可将大括号初始化器用于任何类型，称为通用的初始化语法。<br>列表初始化禁止缩窄转换<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d1[<span class="number">4</span>] &#123;<span class="number">1.0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4.0</span>&#125;;</span><br><span class="line"><span class="keyword">double</span> d2[<span class="number">100</span>] &#123;&#125;;      <span class="comment">//默认初始化为0</span></span><br><span class="line"><span class="keyword">long</span> l3[] = &#123;<span class="number">20</span>, <span class="number">30</span>, <span class="number">2.3</span>&#125;;      <span class="comment">//C++编译错误，从double无法转化为long      C语言编译成功，2.3转化为2</span></span><br><span class="line"><span class="keyword">char</span> str1[] = &#123;<span class="string">"hello C++11"</span>&#125;;</span><br><span class="line"><span class="keyword">char</span> str2[] &#123;<span class="string">"hello C++11"</span>&#125;;</span><br><span class="line"><span class="built_in">string</span> str3 = &#123;<span class="string">"hello C++11"</span>&#125;;</span><br><span class="line"><span class="built_in">string</span> str4 &#123;<span class="string">"hello C++11"</span>&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vi&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;  <span class="comment">//C++11中可以对vector使用列表初始化</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2-C-11新增基于范围的for循环"><a href="#2-C-11新增基于范围的for循环" class="headerlink" title="2. C++11新增基于范围的for循环"></a>2. C++11新增基于范围的for循环</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> arr[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>,&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">double</span> x:arr)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> x : &#123;<span class="number">23</span>, <span class="number">1</span>, <span class="number">45</span>, <span class="number">23</span>&#125;)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-右值引用-amp-amp"><a href="#3-右值引用-amp-amp" class="headerlink" title="3. 右值引用&amp;&amp;"></a>3. 右值引用&amp;&amp;</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> &amp;&amp;rr = <span class="number">1</span>;       <span class="comment">//int const &amp;rr = 1;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-关键字decltype"><a href="#4-关键字decltype" class="headerlink" title="4. 关键字decltype"></a>4. 关键字decltype</h2><p>从表达式推断其结果类型。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sum</span><span class="params">(T1 x, T2 y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   type z = x + y;      <span class="comment">//type无法确定</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sum</span><span class="params">(T1 x, T2 y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">decltype</span>(x+y) z = x + y;      <span class="comment">//使用关键字解决</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-后置返回类型"><a href="#5-后置返回类型" class="headerlink" title="5. 后置返回类型"></a>5. 后置返回类型</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="function">type <span class="title">sum</span><span class="params">(T1 x, T2 y)</span>        <span class="comment">//type无法确定</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line">auto sum(T1 x, T2 y) -&gt; decltype(x+y)   //通过后置返回类型解决</span><br><span class="line">&#123;</span><br><span class="line">   type z = x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-thread-local关键字"><a href="#6-thread-local关键字" class="headerlink" title="6. thread_local关键字"></a>6. thread_local关键字</h2><p>声明变量的生命周期和所在线程相同。</p>
<h2 id="7-作用域内枚举"><a href="#7-作用域内枚举" class="headerlink" title="7. 作用域内枚举"></a>7. 作用域内枚举</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> XX &#123;one, two&#125;;</span><br><span class="line"><span class="keyword">enum</span> YY &#123;haha, one&#125;;        <span class="comment">//编译错误 one重复定义</span></span><br><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">XX</span> &#123;</span>one, two&#125;;</span><br><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">YY</span> &#123;</span>haha, one&#125;;  <span class="comment">//编译成功</span></span><br></pre></td></tr></table></figure>
<p>作用域内枚举不能隐式转化为整型，需要显式类型转化<br>作用域内枚举可指定底层类型<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> :</span> short XX &#123;one, two&#125;;   <span class="comment">//将底层类型设为short</span></span><br></pre></td></tr></table></figure></p>
<h2 id="8-nullptr空指针"><a href="#8-nullptr空指针" class="headerlink" title="8. nullptr空指针"></a>8. nullptr空指针</h2><p>C++11引入新关键字nullptr表示空指针。</p>
<h2 id="9-C-11允许类内初始化，和在构造函数中使用初始化列表等价"><a href="#9-C-11允许类内初始化，和在构造函数中使用初始化列表等价" class="headerlink" title="9. C++11允许类内初始化，和在构造函数中使用初始化列表等价"></a>9. C++11允许类内初始化，和在构造函数中使用初始化列表等价</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="9-模板别名"><a href="#9-模板别名" class="headerlink" title="9. 模板别名"></a>9. 模板别名</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> arrtype = <span class="built_in">std</span>::arry&lt;T, <span class="number">12</span>&gt;;</span><br><span class="line"><span class="built_in">array</span>&lt;<span class="keyword">double</span>&gt; gallones;</span><br><span class="line"><span class="built_in">array</span>&lt;<span class="keyword">int</span>&gt; days;</span><br><span class="line">arrtype&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;months;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> BYTE = <span class="keyword">char</span>;      <span class="comment">//using 用于非模板和typedef等价</span></span><br></pre></td></tr></table></figure>
<h2 id="10-Lambda函数"><a href="#10-Lambda函数" class="headerlink" title="10. Lambda函数"></a>10. Lambda函数</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ capture ] ( params ) <span class="keyword">mutable</span> exception attribute -&gt; ret &#123; body &#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>mutable 修饰符说明 lambda 表达式体内的代码可以修改被捕获的变量，并且可以访问被捕获对象的 non-const 方法</li>
<li>exception 说明 lambda 表达式是否抛出异常(noexcept)，以及抛出何种异常，类似于void f() throw(X, Y)。</li>
<li>attribute 用来声明属性。</li>
<li>capture 指定了在可见域范围内 lambda 表达式的代码内可见得外部变量的列表</li>
<li>params 指定 lambda 表达式的参数。<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">auto</span> func = [x] (<span class="keyword">int</span> y) <span class="keyword">mutable</span> -&gt; <span class="keyword">int</span> &#123; <span class="keyword">return</span> x &gt; y ? x :y;&#125;;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;func(<span class="number">30</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="11-包装器"><a href="#11-包装器" class="headerlink" title="11. 包装器"></a>11. 包装器</h2><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol>
<li>C++PrimerPlus（第六版）中文版</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/07/12/mongodb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/12/mongodb/" class="post-title-link" itemprop="url">mongodb 基础学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-12 22:47:00" itemprop="dateCreated datePublished" datetime="2017-07-12T22:47:00+08:00">2017-07-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="mongodb各个程序功能介绍"><a href="#mongodb各个程序功能介绍" class="headerlink" title="mongodb各个程序功能介绍"></a>mongodb各个程序功能介绍</h1><p>bsondump 导出bson结构<br>mongo 客户端<br>mongod 服务器<br>mongodump 整体数据库导出 二进制<br>mongoexport 导出易识别的json文档或csv文档<br>mongorestore 数据库整体导入<br>mongos 路由器(分片时用)</p>
<h1 id="mongodb启动-连接"><a href="#mongodb启动-连接" class="headerlink" title="mongodb启动 连接"></a>mongodb启动 连接</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath=/ptah/to/database --logpath=/path/to/logfile --fork --port 27017</span><br></pre></td></tr></table></figure>
<p>参数解释：</p>
<ol>
<li><code>--dbpath</code>数据存储目录</li>
<li><code>--logpath</code>日志存储文件</li>
<li><code>--port</code> 允许端口</li>
<li><code>--fork</code> 后台允许</li>
<li><code>--smallfiles</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mongod --dbpath=/data/mongodb --logpath=/data/mongodb/mongodb.log --port 27017 --fork</span><br><span class="line"></span><br><span class="line">about to fork child process, waiting until server is ready for connections.</span><br><span class="line">forked process: 4237</span><br><span class="line">child process started successfully, parent exiting</span><br></pre></td></tr></table></figure>
<p>mongdb连接，默认连接27017端口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[CaseZheng@home mongodb]$ mongo</span><br><span class="line">MongoDB shell version: 3.2.12</span><br><span class="line">connecting to: test</span><br><span class="line">Welcome to the MongoDB shell.</span><br><span class="line">For interactive help, type &quot;help&quot;.</span><br><span class="line">For more comprehensive documentation, see</span><br><span class="line">        http://docs.mongodb.org/</span><br><span class="line">Questions? Try the support group</span><br><span class="line">        http://groups.google.com/group/mongodb-user</span><br><span class="line">Server has startup warnings:</span><br><span class="line">2017-07-12T23:32:29.327+0800 I CONTROL  [initandlisten] ** WARNING: You are running this process as the root user, which is not recommended.</span><br><span class="line">2017-07-12T23:32:29.327+0800 I CONTROL  [initandlisten]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="mongodb入门命令"><a href="#mongodb入门命令" class="headerlink" title="mongodb入门命令"></a>mongodb入门命令</h1><ol>
<li>show dbs;  show databases; 查看数据库</li>
<li>use databasesname;  选中数据库</li>
<li>show tables; show collection; 查看数据库中的所有表</li>
<li>创建数据库 隐式创建 use databasesname 如果数据库不存在，则创建</li>
<li>db.createCollection(‘tablename’) 创建表</li>
<li>db.tablename.drop() 删除表</li>
<li>db.dropDatabase() 删除数据库</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;show databases</span><br><span class="line">local  0.000GB</span><br><span class="line">&gt; use local</span><br><span class="line">switched to db local</span><br><span class="line">&gt; show tables</span><br><span class="line">startup_log</span><br><span class="line">&gt; use test</span><br><span class="line">switched to db test</span><br><span class="line">&gt; db.createCollection(&apos;stu&apos;)</span><br><span class="line">&#123; &quot;ok&quot; : 1 &#125;</span><br><span class="line">&gt; show tables</span><br><span class="line">stu</span><br><span class="line">&gt; db.stu.drop()</span><br><span class="line">true</span><br><span class="line">&gt; db.dropDatabase()</span><br><span class="line">&#123; &quot;dropped&quot; : &quot;test&quot;, &quot;ok&quot; : 1 &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<h1 id="mongodb增"><a href="#mongodb增" class="headerlink" title="mongodb增"></a>mongodb增</h1><p>db.tablename.insert(jsonvalue);<br>一次可插入多个数据，使用json数组即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;casezheng&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; show tables;</span><br><span class="line">test</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598090b7817bfe1400a371be&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="mongodb删"><a href="#mongodb删" class="headerlink" title="mongodb删"></a>mongodb删</h1><p>db.tablename.remove(expression);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598090b7817bfe1400a371be&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:3,&quot;name&quot;:&quot;casezheng&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:4,&quot;name&quot;:&quot;casezheng&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:5,&quot;name&quot;:&quot;casezheng&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:6,&quot;name&quot;:&quot;casezheng&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.remove(&#123;&quot;id&quot;:2&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nRemoved&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091ee817bfe1400a371c1&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091f2817bfe1400a371c2&quot;), &quot;id&quot; : 6, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt; db.test.remove(&#123;&quot;id&quot;:6&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nRemoved&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091ee817bfe1400a371c1&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>db.tablename.remove(expression, true);不论匹配多少行只删掉一行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091ee817bfe1400a371c1&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:5,&quot;name&quot;:&quot;casezheng2&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091ee817bfe1400a371c1&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598092ac817bfe1400a371c3&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng2&quot; &#125;</span><br><span class="line">&gt; db.test.remove(&#123;&quot;id&quot;:5&#125;, true);</span><br><span class="line">WriteResult(&#123; &quot;nRemoved&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598092ac817bfe1400a371c3&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng2&quot; &#125;</span><br><span class="line">&gt; db.test.insert(&#123;&quot;id&quot;:5,&quot;name&quot;:&quot;casezheng3&quot;&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.remove(&#123;&quot;id&quot;:5&#125;);</span><br><span class="line">WriteResult(&#123; &quot;nRemoved&quot; : 2 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="mongodb改"><a href="#mongodb改" class="headerlink" title="mongodb改"></a>mongodb改</h1><p>db.tablename.update(expression, jsonvalue);将符合expression的行改为jsonvalue<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt; db.test.update(&#123;&quot;id&quot;:3&#125;, &#123;&quot;name&quot;:&quot;casezhenghaha&quot;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>可使用谓词set设置其中某个列的值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&gt; db.test.update(&#123;&quot;id&quot;:4&#125;, &#123;$set:&#123;&quot;name&quot;:&quot;casezhenghehehe&quot;&#125;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 &#125;)</span><br><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>unset 删除某个列<br>rename 重命名某个列<br>inc 增长某个列</p>
<h1 id="mongodb查"><a href="#mongodb查" class="headerlink" title="mongodb查"></a>mongodb查</h1><p>db.tablename.find(expression);<br>db.tablename.findOne(expression);<br>查询所有<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>查询单独的某列<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:4&#125;, &#123;&quot;name&quot;:1&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>findOne只查询一行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:5&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&gt; db.test.findOne(&#123;&quot;id&quot;:5&#125;)</span><br><span class="line">&#123;</span><br><span class="line">        &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;),</span><br><span class="line">        &quot;id&quot; : 5,</span><br><span class="line">        &quot;name&quot; : &quot;casezheng&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="mongodb查询表达式"><a href="#mongodb查询表达式" class="headerlink" title="mongodb查询表达式"></a>mongodb查询表达式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<p>不等于ne<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:&#123;$ne:5&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>in nin<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:&#123;$in:[4, 5, 3]&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:&#123;$nin:[4, 5, 3]&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>all<br>取出field列是数组，且至少包含v1,v2值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;fiels:&#123;$all:[v1, v2]&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<p>exi存在某个属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:&#123;$exists:1&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br></pre></td></tr></table></figure></p>
<p>与，写在一个json里面即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;), &quot;id&quot; : 5, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809b69817bfe1400a371cb&quot;), &quot;id&quot; : 10 &#125;</span><br><span class="line">&gt; db.test.find(&#123;&quot;id&quot;:&#123;$ne:5&#125;, &quot;name&quot;:&#123;$exists:1&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>nor 所有条件都不满足的文档为真返回<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.test.find(&#123;$nor:[&#123;&quot;id&quot;:5&#125;,&#123;&quot;name&quot;:&quot;casezheng&quot;&#125;]&#125;);</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;), &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;), &quot;id&quot; : 4, &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;), &quot;id&quot; : 3, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;), &quot;id&quot; : 2, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;), &quot;id&quot; : 1, &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;59809b69817bfe1400a371cb&quot;), &quot;id&quot; : 10 &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>where速度慢</p>
<h1 id="mongodb游标"><a href="#mongodb游标" class="headerlink" title="mongodb游标"></a>mongodb游标</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt; var cursor = db.test.find()</span><br><span class="line">&gt; while(cursor.hasNext())&#123;</span><br><span class="line">... printjsononeline(cursor.next())</span><br><span class="line">... &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;),  &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;),  &quot;id&quot; : 4,  &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;),  &quot;id&quot; : 5,  &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;),  &quot;id&quot; : 5,  &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;),  &quot;id&quot; : 5,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;),  &quot;id&quot; : 3,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;),  &quot;id&quot; : 2,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;),  &quot;id&quot; : 1,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;59809b69817bfe1400a371cb&quot;),  &quot;id&quot; : 10 &#125;</span><br><span class="line">&gt; var cursor = db.test.find()</span><br><span class="line">&gt; cursor.forEach(function(obj)&#123;printjsononeline(obj)&#125;);</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598091e7817bfe1400a371bf&quot;),  &quot;name&quot; : &quot;casezhenghaha&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598091eb817bfe1400a371c0&quot;),  &quot;id&quot; : 4,  &quot;name&quot; : &quot;casezhenghehehe&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;59809440817bfe1400a371c5&quot;),  &quot;id&quot; : 5,  &quot;name&quot; : &quot;casezheng&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095c0817bfe1400a371c6&quot;),  &quot;id&quot; : 5,  &quot;name&quot; : &quot;casezheng4&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095c3817bfe1400a371c7&quot;),  &quot;id&quot; : 5,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095c7817bfe1400a371c8&quot;),  &quot;id&quot; : 3,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095ca817bfe1400a371c9&quot;),  &quot;id&quot; : 2,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;598095cd817bfe1400a371ca&quot;),  &quot;id&quot; : 1,  &quot;name&quot; : &quot;casezheng45&quot; &#125;</span><br><span class="line">&#123;  &quot;_id&quot; : ObjectId(&quot;59809b69817bfe1400a371cb&quot;),  &quot;id&quot; : 10 &#125;</span><br></pre></td></tr></table></figure>
<h1 id="mongodb分组"><a href="#mongodb分组" class="headerlink" title="mongodb分组"></a>mongodb分组</h1><h1 id="maoReduce"><a href="#maoReduce" class="headerlink" title="maoReduce"></a>maoReduce</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.casezheng.date/2017/07/04/python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CaseZheng">
      <meta itemprop="description" content="CaseZheng的博客网站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CaseZheng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/04/python/" class="post-title-link" itemprop="url">初学Python</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-04 22:57:00" itemprop="dateCreated datePublished" datetime="2017-07-04T22:57:00+08:00">2017-07-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-12 12:56:35" itemprop="dateModified" datetime="2020-04-12T12:56:35+08:00">2020-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>0</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Python的数据类型"><a href="#Python的数据类型" class="headerlink" title="Python的数据类型"></a>Python的数据类型</h1><ol>
<li>整数 整数的运算结果是精确的</li>
<li>浮点数 浮点数的运算结果不一定是精确的，可能有精度损失。整数和浮点数一起运算结果为浮点数。</li>
<li><p>字符串 用’’或””括起来的任意文本。</p>
<ol>
<li>如果字符串中有’可以用””括起来。 例如：”aaa ‘bbb’ aaa”</li>
<li>如果字符串中有”可以用’’括起来。 例如：’aaa “bbb” aaa’</li>
<li>如果字符串中既有’又有”，可以用\转义。 例如：<code>&quot;aaa \&#39;bbb\&#39;\&quot;ccc\&quot; aaa&quot;</code> 或 <code>&#39;aaa \&#39;bbb\&#39;\&quot;ccc\&quot; aaa&#39;</code></li>
<li>如果字符串中存在多个需要转义的字符，对每个字符都转义很麻烦，可以在字符串前加前缀r，表示一个raw字符串，里面的字符就不需要转义啦。 例如：<code>r&#39;\(~_~)/ \(~_~)/&#39;</code> 但r’…’表示法不能表示多行字符串，也不能表示包含’和”的字符串。</li>
<li><p>如果要表示多行字符串，可以用<code>&#39;&#39;&#39;...&#39;&#39;&#39;</code>表示。 例如</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''' Line1</span></span><br><span class="line"><span class="string">    Line2</span></span><br><span class="line"><span class="string">    Line3'''</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以在多行字符串前加r前缀，将其变为raw字符串。</p>
</li>
</ol>
</li>
<li>布尔值 True、False  运算：与(and)、或(or)、非(not) Python将0、空字符串、None看作False，其它数值和非空字符串都看成True。and和or短路计算。</li>
<li>空值 None None不能理解为0，因为0是有意义的，而None是一个特殊的空值。</li>
</ol>
<h1 id="Python的注释以-开头"><a href="#Python的注释以-开头" class="headerlink" title="Python的注释以#开头"></a>Python的注释以#开头</h1><h1 id="Python变量"><a href="#Python变量" class="headerlink" title="Python变量"></a>Python变量</h1><p>Python标识符必须是大小写英文、数字和下划线的组合，且不能数字开头。不能使保留字。区分大小写。<br>Python是动态语言。可以把任意数据类型赋值给变量，同一个变量可以反复赋值，而且可以是不同类型的变量。<br><img src="/Picture/python_keyword.jpg" alt="Python3关键字"></p>
<h1 id="Python中Unicode字符串需要在字符串前加多u前缀。"><a href="#Python中Unicode字符串需要在字符串前加多u前缀。" class="headerlink" title="Python中Unicode字符串需要在字符串前加多u前缀。"></a>Python中Unicode字符串需要在字符串前加多u前缀。</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br></pre></td></tr></table></figure>
<p>告诉Python解释器，用UTF-8编码读取源代码。文件格式也要保存为UTF-8格式。</p>
<h1 id="Python创建list"><a href="#Python创建list" class="headerlink" title="Python创建list"></a>Python创建list</h1><p>list是一种有序的集合，可以随时添加和删除其中元素。构造list直接用[]将list的所有元素都括起来，就是list对象。list中包含的元素可以是不同的数据类型。一个元素都没有的list就是空list。<br>list可以通过索引获取指定元素。索引从0开始。使用索引访问list注意不要越界，超过索引范围会报错。<br>list可以用-1访问最后一个元素。-n表示倒数第n个，注意不要越界。</p>
<h1 id="Python中list添加新元素"><a href="#Python中list添加新元素" class="headerlink" title="Python中list添加新元素"></a>Python中list添加新元素</h1><ol>
<li>使用list的append()方法。append将新元素添加到list的尾部。</li>
<li>使用list的insert()方法，insert接受两个参数，第一个是索引号，第二个是待添加的新元素，表示将新元素插入到索引号所在的位置，原有元素后移。</li>
</ol>
<h1 id="Python中list删除元素"><a href="#Python中list删除元素" class="headerlink" title="Python中list删除元素"></a>Python中list删除元素</h1><ol>
<li>使用list的pop()方法。pop方法不带参数，删除并返回list的最后一个元素。</li>
<li>使用list的pop()方法。pop方法带一个索引号参数，删除并返回索引号所在位置的元素，后面的元素前移。</li>
</ol>
<h1 id="Python替换元素"><a href="#Python替换元素" class="headerlink" title="Python替换元素"></a>Python替换元素</h1><p>对list的某个索引赋值，直接用新元素替换原来的元素。</p>
<h1 id="Python创建tuple"><a href="#Python创建tuple" class="headerlink" title="Python创建tuple"></a>Python创建tuple</h1><p>元组一旦创建完毕就不能修改了。创建元组使用()将tuple的所有元素都括起来。tuple可以使用索引访问元素。<br>Python创建单元素tuple，()可以表示tuple，也可以作为括号表示运算时的优先级。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 错误，t不是tuple，而是整数1 (1)会被Python解释器计算出结果1</span></span><br><span class="line">t = (<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 正确</span></span><br><span class="line">t = (<span class="number">1</span>,)</span><br></pre></td></tr></table></figure></p>
<h1 id="Python条件判断和循环"><a href="#Python条件判断和循环" class="headerlink" title="Python条件判断和循环"></a>Python条件判断和循环</h1><p>Python具有相同缩进的代码被视为代码块。缩进习惯：4个空格，不要使用Tab，更不要使用Tab和空格。</p>
<h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断语句 :</span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>
<h2 id="if-else语句"><a href="#if-else语句" class="headerlink" title="if-else语句"></a>if-else语句</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断语句 :</span><br><span class="line">    代码块</span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>
<h2 id="if-elif-else"><a href="#if-elif-else" class="headerlink" title="if-elif-else"></a>if-elif-else</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件 :</span><br><span class="line">    代码块</span><br><span class="line"><span class="keyword">elif</span> 判断条件 :</span><br><span class="line">    代码块</span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>
<p>不能忘记”:”号</p>
<h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 临时变量 <span class="keyword">in</span> 要遍历的容器</span><br><span class="line">    代码块</span><br><span class="line"></span><br><span class="line">L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,]</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> L</span><br><span class="line">    <span class="keyword">print</span> num</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> 临时变量 <span class="keyword">in</span> 要遍历的容器</span><br><span class="line">    代码块</span><br><span class="line"><span class="keyword">else</span> :   <span class="comment"># 循环结束 则会执行下面的代码块 如果循环被break打断，则不会执行</span></span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>
<h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 判断条件 :</span><br><span class="line">    代码块</span><br><span class="line"></span><br><span class="line">N = <span class="number">10</span></span><br><span class="line">x = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> x &lt; N :</span><br><span class="line">    <span class="keyword">print</span> x</span><br><span class="line">    x = x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> 判断条件 :</span><br><span class="line">    代码块</span><br><span class="line"><span class="keyword">else</span> :   <span class="comment"># 循环结束 则会执行下面的代码块 如果循环被break打断，则不会执行</span></span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>
<p>while循环每次先判断判断条件，如果为True，则继续执行循环体的代码块，否则，退出循环。</p>
<h2 id="break退出循环"><a href="#break退出循环" class="headerlink" title="break退出循环"></a>break退出循环</h2><p>用 for 循环或者 while 循环时，如果要在循环体内直接退出循环，可以使用 break 语句。</p>
<h2 id="continue退出本次循环，继续循环"><a href="#continue退出本次循环，继续循环" class="headerlink" title="continue退出本次循环，继续循环"></a>continue退出本次循环，继续循环</h2><p>在循环过程中，可以用break退出当前循环，还可以用continue跳过后续循环代码，继续下一次循环。</p>
<h2 id="Python的循环可以嵌套"><a href="#Python的循环可以嵌套" class="headerlink" title="Python的循环可以嵌套"></a>Python的循环可以嵌套</h2><h2 id="for循环比while循环执行速度快"><a href="#for循环比while循环执行速度快" class="headerlink" title="for循环比while循环执行速度快"></a>for循环比while循环执行速度快</h2><h2 id="Python提供两个内置函数用于在for循环中定制特殊的循环"><a href="#Python提供两个内置函数用于在for循环中定制特殊的循环" class="headerlink" title="Python提供两个内置函数用于在for循环中定制特殊的循环"></a>Python提供两个内置函数用于在for循环中定制特殊的循环</h2><ol>
<li>range或xrange range一次性地返回连续的整数列表 xrange一次产生一个数据元素，相较于range更节约空间</li>
<li>zip 返回并行的元素元组的列表，常用于在for循环中遍历数个序列</li>
</ol>
<h1 id="Python中dict的创建"><a href="#Python中dict的创建" class="headerlink" title="Python中dict的创建"></a>Python中dict的创建</h1><p>dict用来存储键值对。<br>花括号{}表示一个dict，然后按照key:value，将元素填入。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    键 : 值,</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">'key1'</span> : value1,</span><br><span class="line">    <span class="string">'key2'</span> : value2,</span><br><span class="line">    <span class="string">'key3'</span> : value3,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>len()函数可以计算任意集合的大小。dict、list、tuple都是集合。</p>
<h1 id="Python中dict的访问"><a href="#Python中dict的访问" class="headerlink" title="Python中dict的访问"></a>Python中dict的访问</h1><p>可以是通过key访问dict的value，只要key存在，dict返回对应的value。如果key不存在，直接报错:KeyError。<br>避免KeyError的两种方法：</p>
<ol>
<li>线判断Key是否存在，用in操作符</li>
<li>使用dict提供的get方法，在Key不存在时，返回None</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;</span><br><span class="line"><span class="string">'key1'</span>: <span class="number">1</span></span><br><span class="line"><span class="string">'key2'</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">'key1'</span> <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> d[<span class="string">'key1'</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">'key3'</span> <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> d[<span class="string">'key3'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> d.get(<span class="string">'key1'</span>)</span><br><span class="line"><span class="keyword">print</span> d.get(<span class="string">'key3'</span>)</span><br></pre></td></tr></table></figure>
<h1 id="Python中dict的特点"><a href="#Python中dict的特点" class="headerlink" title="Python中dict的特点"></a>Python中dict的特点</h1><ol>
<li>dict查找速度快，查找速度不会随着元素数量增多而变慢。list的查找速度回随着元素增多而逐渐下降。</li>
<li>dict的key不可重复。</li>
<li>dict存储的key-value是没有顺序的。</li>
<li>dict作为key的元素必须不可变。</li>
</ol>
<h1 id="Python更新dict"><a href="#Python更新dict" class="headerlink" title="Python更新dict"></a>Python更新dict</h1><p>添加新的键值对，如果key已经存在则会替换掉原来的value<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d = &#123; <span class="string">'key1'</span> : <span class="number">1</span>, <span class="string">'key2'</span> : <span class="number">2</span>, &#125;</span><br><span class="line">d[<span class="string">'key3'</span>] = <span class="number">3</span></span><br><span class="line">d[<span class="string">'key3'</span>] = <span class="number">6</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Python遍历dict"><a href="#Python遍历dict" class="headerlink" title="Python遍历dict"></a>Python遍历dict</h1><p>通过for循环可以遍历dict的key，通过key获取value。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d = &#123; &apos;key1&apos; : 1, &apos;key2&apos; : 2, &#125;</span><br><span class="line">for key in d :</span><br><span class="line">    print key</span><br></pre></td></tr></table></figure></p>
<h1 id="Python中set的创建"><a href="#Python中set的创建" class="headerlink" title="Python中set的创建"></a>Python中set的创建</h1><p>创建set的方式是调用set()并传入一个list，list的元素将作为set的元素。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = set([&apos;A&apos;, &apos;B&apos;, &apos;C&apos;,])</span><br><span class="line">print s</span><br></pre></td></tr></table></figure></p>
<h1 id="Python中set的访问"><a href="#Python中set的访问" class="headerlink" title="Python中set的访问"></a>Python中set的访问</h1><p>set存储的无序集合，无法通过索引访问。访问一个set中的某个元素实际上就是判断该元素是否存在于set中。可以用in操作符判断。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = set([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>,])</span><br><span class="line"><span class="keyword">print</span> <span class="string">'A'</span> <span class="keyword">in</span> s</span><br><span class="line"><span class="keyword">print</span> <span class="string">'D'</span> <span class="keyword">in</span> s</span><br></pre></td></tr></table></figure></p>
<h1 id="Python中set的特点"><a href="#Python中set的特点" class="headerlink" title="Python中set的特点"></a>Python中set的特点</h1><ol>
<li>访问速度快</li>
<li>set存储的元素不可变</li>
<li>set存储元素没有顺序</li>
</ol>
<h1 id="Python中set的遍历"><a href="#Python中set的遍历" class="headerlink" title="Python中set的遍历"></a>Python中set的遍历</h1><p>通过for循环遍历<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = set([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>,])</span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> s :</span><br><span class="line">    <span class="keyword">print</span> value</span><br></pre></td></tr></table></figure></p>
<h1 id="Python更新set"><a href="#Python更新set" class="headerlink" title="Python更新set"></a>Python更新set</h1><p>给set添加元素，使用set提供的add()方法<br>从set中删除元素，使用set提供的remove()方法。如果remove的元素不存在，remove会报错，所有remove前需要判断。</p>
<h1 id="Python函数"><a href="#Python函数" class="headerlink" title="Python函数"></a>Python函数</h1><p>Python中定义一个函数要使用def语句，依次写出函数名、括号、括号中的参数和冒号，然后，在缩进块中编写函数体，函数的返回值用return语句返回。<br>如果没有return语句，函数执行完毕也会返回结果，只是结果为None。<br>return None可以简写为return。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span></span></span><br><span class="line">    if x &gt;= 0 :</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        <span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure></p>
<h1 id="Python函数可以返回多个返回值"><a href="#Python函数可以返回多个返回值" class="headerlink" title="Python函数可以返回多个返回值"></a>Python函数可以返回多个返回值</h1><p>Python函数返回多个值，其返回值其实是一个tuple。在语法上，返回一个tuple可以省略括号，而多个变量可以同时接收一个tuple，按位置赋给对应的值，所以，Python的函数返回多值其实就是返回一个tuple。</p>
<h1 id="Python函数调用可以递归调用自身"><a href="#Python函数调用可以递归调用自身" class="headerlink" title="Python函数调用可以递归调用自身"></a>Python函数调用可以递归调用自身</h1><p>递归函数的优点是定义简单，逻辑清晰。理论上，所有的递归函数都可以写成循环的方式，但循环的逻辑不如递归清晰。<br>使用递归函数需要注意防止栈溢出。在计算机中，函数调用是通过栈（stack）这种数据结构实现的，每当进入一个函数调用，栈就会加一层栈帧，每当函数返回，栈就会减一层栈帧。由于栈的大小不是无限的，所以，递归调用的次数过多，会导致栈溢出。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(n, a, b, c)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span> :</span><br><span class="line">        <span class="keyword">print</span> a, <span class="string">'--&gt;'</span>, c</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    move(n<span class="number">-1</span>, a, c, b)</span><br><span class="line">    <span class="keyword">print</span> a, <span class="string">'--&gt;'</span>, c</span><br><span class="line">    move(n<span class="number">-1</span>, b, a, c)</span><br><span class="line"></span><br><span class="line">move(<span class="number">4</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>)</span><br></pre></td></tr></table></figure></p>
<p>递归需要边界条件，递归前进段和递归返回段</p>
<h1 id="Python函数定义默认参数"><a href="#Python函数定义默认参数" class="headerlink" title="Python函数定义默认参数"></a>Python函数定义默认参数</h1><p>函数默认参数的作用是简化调用。由于函数的参数按从左到右的顺序匹配，所以默认参数只能定义在必需参数的后面。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(x, n=<span class="number">2</span>)</span></span></span><br><span class="line">    s = 1</span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span> :</span><br><span class="line">        n = n - <span class="number">1</span></span><br><span class="line">        s = s * x</span><br><span class="line">    <span class="keyword">return</span> s</span><br></pre></td></tr></table></figure></p>
<h1 id="Python定义可变参数"><a href="#Python定义可变参数" class="headerlink" title="Python定义可变参数"></a>Python定义可变参数</h1><p>可变参数让一个函数可以接受任意个参数。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(*args)</span> :</span></span><br><span class="line">    pirnt args</span><br></pre></td></tr></table></figure></p>
<p>可变参数的名字前加<code>*</code>号，可以传入0个、1个或多个参数给可变参数。传入可变参数，实质是传入了一个tuple。</p>
<h1 id="Python函数内使用全局变量，需要使用global关键字声明"><a href="#Python函数内使用全局变量，需要使用global关键字声明" class="headerlink" title="Python函数内使用全局变量，需要使用global关键字声明"></a>Python函数内使用全局变量，需要使用global关键字声明</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = 32</span><br><span class="line">print x     # 32</span><br><span class="line">def f1():</span><br><span class="line">    global x</span><br><span class="line">    x = 43</span><br><span class="line">    print x     # 43</span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line">print x         # 43</span><br></pre></td></tr></table></figure>
<h1 id="Python-参数传递形式"><a href="#Python-参数传递形式" class="headerlink" title="Python 参数传递形式"></a>Python 参数传递形式</h1><p>位置参数：从左到右<br>关键字参数：按关键名称匹配<br>既有位置参数，又有关键词参数时：所有位置参数，所有关键字参数<br>定义函数时使用默认参数：有默认值的参数<br>混用有默认和无默认值的参数对，无默认值在前<br>调用函数时使用可变参数要求：<br>定义函数时使用<code>*</code>，收集位置参数<br>定义函数时使用<code>**</code>，收集关键字参数</p>
<h1 id="Python对list进行切片"><a href="#Python对list进行切片" class="headerlink" title="Python对list进行切片"></a>Python对list进行切片</h1><p>对于经常取指定索引范围的操作，Python提供切片(Slice)操作符。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,]</span><br><span class="line">L[<span class="number">0</span>:<span class="number">3</span>] <span class="comment">#从索引0开始到索引3为止 1 2 3</span></span><br><span class="line">L[:<span class="number">3</span>] <span class="comment">#与L[0:3]左右相同</span></span><br></pre></td></tr></table></figure></p>
<p>切片操作实质是复制出一个新的list<br>切片操作还可以指定第三个参数，表示每N个取一个。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,]</span><br><span class="line">L[<span class="number">0</span>:<span class="number">6</span>:<span class="number">2</span>] <span class="comment">#从索引0开始到索引6结束，每2个取一个，即隔一个取一个。</span></span><br></pre></td></tr></table></figure></p>
<p>把list换成tuple，切片操作完全相同，只是切片的结果也变成了tuple。<br>list支持L[-1]取倒数第一个元素，同样支持倒数切片。倒数第一个元素的索引是-1。倒序切片包含起始索引，不包含结束索引。<br>字符串也支持切片操作，操作结果是字符串。Python没有对字符串的截取函数。</p>
<h1 id="Python迭代"><a href="#Python迭代" class="headerlink" title="Python迭代"></a>Python迭代</h1><p>在Python中迭代通过for…in来完成。<br>Python迭代操作是对于一个集合，无论该集合是有序或者无序，用for循环总是可以依次取出集合的每一个元素。<br>集合：</p>
<ol>
<li>有序集合：list、tuple、str和unicode</li>
<li>无序集合：set</li>
<li>无序集合并且具有key-value对：dict</li>
</ol>
<p>迭代是一个动词，指一种操作，在python中就是for循环。迭代与按下标访问数组最大的不同是，后者是一种具体的迭代实现方式，前者只关心迭代结果，不关心迭代内部的具体实现。</p>
<h1 id="Python索引迭代"><a href="#Python索引迭代" class="headerlink" title="Python索引迭代"></a>Python索引迭代</h1><p>Python中迭代永远是取出元素本身，而非元素的索引。<br>如果想在for循环中拿到索引，可以使用enumerate()函数。enumerate将迭代的每个元素实际是一个tuple。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">'Adam'</span>, <span class="string">'Lisa'</span>, <span class="string">'Bart'</span>, <span class="string">'Paul'</span>]</span><br><span class="line"><span class="keyword">for</span> index, name <span class="keyword">in</span> enumerate(L):</span><br><span class="line">    <span class="keyword">print</span> index, <span class="string">'-'</span>, name</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> enumerate(L):</span><br><span class="line">    index = t[<span class="number">0</span>]</span><br><span class="line">    name = t[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">print</span> index, <span class="string">'-'</span>, name</span><br></pre></td></tr></table></figure></p>
<h1 id="Python迭代dict"><a href="#Python迭代dict" class="headerlink" title="Python迭代dict"></a>Python迭代dict</h1><p>用for直接迭代dict可以得到dict的key，如果想迭代dict对象的value，可以使用dict对象的values()方法，该方法将dict转换成包含所有value的list。dict提供的itervalues方法可以替代value方法，迭代效果完全一样。</p>
<ol>
<li>values()方法实际把一个dict转换成包含value的list。</li>
<li>itervalues()方法不会转换，在迭代过程中依次从dict中取出value，itervalues方法比values方法节省内存。</li>
</ol>
<p>如果迭代dict时即想得到key，又想得到value，可以使用dict对象的items()方法返回的值。该方法将dict转化为包含tuple的list。通过对该list的迭代得到key和value。</p>
<h1 id="Python迭代-1"><a href="#Python迭代-1" class="headerlink" title="Python迭代"></a>Python迭代</h1><p>iterator(可迭代)对象<br>支持每次返回自己包含的一个成员的对象<br>对象实现<code>__iter__</code>方法   序列类型  非序列类型 用户自定义包含<code>__iter__()</code>或<code>__getitem__()</code>方法的类</p>
<h1 id="Python生成列表"><a href="#Python生成列表" class="headerlink" title="Python生成列表"></a>Python生成列表</h1><ol>
<li>range()</li>
<li>列表生成式</li>
<li>字符串可以通过 % 进行格式化，用指定的参数替代 %s。字符串的join()方法可以把一个 list 拼接成一个字符串。</li>
<li>条件过滤，列表生成式的for循环后面可以加上if判断。</li>
<li>列表表达式多层for循环可以嵌套。</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [1x1, 2x2, 3x3, ..., 10x10]</span></span><br><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得偶数的平方</span></span><br><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用 3 层for循环的列表生成式，找出对称的 3 位数。例如，121 就是对称数，因为从右到左倒过来还是 121。</span></span><br><span class="line">[n1*<span class="number">100</span>+n2*<span class="number">10</span>+n3 <span class="keyword">for</span> n1 <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> n2 <span class="keyword">in</span> range(<span class="number">10</span>) <span class="keyword">for</span> n3 <span class="keyword">in</span> range(<span class="number">10</span>) <span class="keyword">if</span> n1==n3]</span><br></pre></td></tr></table></figure>
<h1 id="Python列表解析"><a href="#Python列表解析" class="headerlink" title="Python列表解析"></a>Python列表解析</h1><p>Python列表解析是Python迭代机制的一种应用，常用于创建新的列表，因此放置在[]中。<br>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[expression for iter_var in iterable]</span><br><span class="line">[expression for iter_var in iterable if cond_expr]</span><br></pre></td></tr></table></figure></p>
<h1 id="Python生成器表达式"><a href="#Python生成器表达式" class="headerlink" title="Python生成器表达式"></a>Python生成器表达式</h1><p>生成器表达式并不真正创建数字列表，而是返回一个生成器对象，此对象在每次计算出一个条目后，把这个条目”产生”（yield）出来。生成器表达式使用惰性计算或称为延迟求值的机制。<br>序列过长，并且每次只需要获取一个元素时，应当考虑使用生成器表达式而不是列表解析<br>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(expr for iter_var in iterable)</span><br><span class="line">(expr for iter_var in iterable if cond_expr)</span><br></pre></td></tr></table></figure></p>
<h1 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h1><p>函数名就是指向函数的变量。<br>高阶函数：能接收函数作为参数的函数。</p>
<h2 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h2><p>map()函数是Python内置的高阶函数，接受一个函数f和一个list，并通过把函数f依次作用于list的每个元素上，得到新的list并返回。map()不会改变原有的list，而是返回一个新的list。</p>
<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h2><p>reduce()函数是Python内置的高阶函数，接受一个函数f和一个list，函数f必须接受两个参数，reduce()对list的每个元素重复调用函数f，并返回最终结果值。reduce()可以接受第三个可选参数，作为计算的初值。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x, y)</span></span></span><br><span class="line"><span class="function">    <span class="title">return</span> <span class="title">x</span> + <span class="title">y</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">reduce</span><span class="params">(f, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>])</span> # <span class="title">f</span><span class="params">(<span class="number">1</span>, <span class="number">3</span>)</span>  <span class="title">f</span><span class="params">(<span class="number">4</span>, <span class="number">5</span>)</span> <span class="title">f</span><span class="params">(<span class="number">9</span>, <span class="number">7</span>)</span> 返回最终结果16</span></span><br><span class="line"><span class="function"><span class="title">reduce</span><span class="params">(f, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>], <span class="number">100</span>)</span> # 最终结果116</span></span><br></pre></td></tr></table></figure></p>
<h2 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h2><p>filter()函数是Python内置的高阶函数，接受一个函数f和一个list，函数f的作用是对每个元素进行判断，返回True或False，filter()根据判断结果自动过滤不符合条件的元素，返回由符合条件元素组成的新list。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从一个list [1, 4, 6, 7, 9, 12, 17]中删除偶数，保留奇数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line">filter(is_odd, [<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">17</span>])</span><br></pre></td></tr></table></figure></p>
<h2 id="sorted"><a href="#sorted" class="headerlink" title="sorted()"></a>sorted()</h2><p>Python内置sorted()函数可以对list进行排序。<br>sorted()函数也是一个高阶函数，可以接收一个函数来实现自定义排序，比较函数定义是，传入两个待比较的元素x、y，如果x应该排在y的前面，返回-1,如果x应该排在y的后面，返回1,如果x和y相等，返回0。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> sorted([<span class="number">36</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">21</span>])</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reversed_cmp</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; y:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    <span class="keyword">if</span> x &lt; y:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> sorted([<span class="number">36</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">21</span>], reversed_cmp)</span><br></pre></td></tr></table></figure></p>
<h1 id="Python中返回函数"><a href="#Python中返回函数" class="headerlink" title="Python中返回函数"></a>Python中返回函数</h1><p>Python的函数不但可以返回int、str、list、dict等数据类型，还可以返回函数。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'call f()...'</span></span><br><span class="line">    <span class="comment"># 定义函数g:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">g</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call g()...'</span></span><br><span class="line">    <span class="comment"># 返回函数g:</span></span><br><span class="line">    <span class="keyword">return</span> g</span><br><span class="line"></span><br><span class="line">x = f()</span><br><span class="line">x()         <span class="comment">#会调用g()</span></span><br></pre></td></tr></table></figure></p>
<p>返回函数可以把一些计算延迟执行。</p>
<h1 id="Python闭包"><a href="#Python闭包" class="headerlink" title="Python闭包"></a>Python闭包</h1><p>在函数内部定义的函数和外部定义的函数是一样的，只是无法被外部访问。<br>如果内层函数引用了外层函数的变量(参数也算变量)，然后返回内层函数的情况，称为闭包(Closure)。<br>外层函数提供了内层函数的环境<br>闭包的特点是返回的函数还引用了外层函数的局部变量，所以，要正确使用闭包，就要确保引用的局部变量在函数返回后不能变。返回函数不要引用任何循环变量，或者后续会发生变化的变量。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">             <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"><span class="keyword">print</span> f1(), f2(), f3() <span class="comment"># 9, 9, 9</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(j)</span>:</span>           <span class="comment"># 加多一层，保存临时变量的值 后续不会再变化</span></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">g</span><span class="params">()</span>:</span></span><br><span class="line">                <span class="keyword">return</span> j*j</span><br><span class="line">            <span class="keyword">return</span> g</span><br><span class="line">        r = f(i)</span><br><span class="line">        fs.append(r)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"><span class="keyword">print</span> f1(), f2(), f3() <span class="comment"># 1, 4, 9</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Python匿名函数"><a href="#Python匿名函数" class="headerlink" title="Python匿名函数"></a>Python匿名函数</h1><p>lambda args: expression</p>
<ol>
<li>args:用逗号分隔的参数列表</li>
<li>expression:表达式</li>
</ol>
<p>Python对匿名函数提供了有限支持。匿名函数有个限制，就是只能有一个表达式，不能是别的非表达式语句，不写return，返回值就是该表达式的结果。使用匿名函数，可以不必定义函数名，直接创建一个函数对象。关键字lambda 表示匿名函数，冒号前面的 x 表示函数参数。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">map(<span class="keyword">lambda</span> x: x * x, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># lambda x: x*x 实际就是：</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x*x</span><br></pre></td></tr></table></figure></p>
<p>返回函数的时候也可以返回匿名函数。<br>lambda的首要用途是指定短小的回调函数<br>lambda将返回一个函数而不是将函数赋值给某个变量名<br>lambda是一个表达式而非语句<br>lambda是一个单个表达式，而不是一个代码块<br>lambda也支持默认参数</p>
<h1 id="Python装饰器"><a href="#Python装饰器" class="headerlink" title="Python装饰器"></a>Python装饰器</h1><p>Python内置的@语法简化装饰器调用。<br>装饰器简化代码，避免每个函数编写重复性代码。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x*<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new_fn</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(x)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call'</span> + f.__name__ + <span class="string">'()'</span></span><br><span class="line">        <span class="keyword">return</span> f(x)</span><br><span class="line">    retun fn</span><br><span class="line"></span><br><span class="line">g1 = new_fn(f1)</span><br><span class="line"><span class="keyword">print</span> g1(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">f1 = new_fn(f1) <span class="comment"># 彻底隐藏原函数</span></span><br><span class="line"><span class="keyword">print</span> f1(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@new_fn</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x*<span class="number">3</span></span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x*<span class="number">3</span></span><br><span class="line">f2 = new_fn(f2)</span><br></pre></td></tr></table></figure></p>
<h1 id="python中编写无参数decorator"><a href="#python中编写无参数decorator" class="headerlink" title="python中编写无参数decorator"></a>python中编写无参数decorator</h1><p>Python中的decorator本质上是一个高阶函数，接受一个函数作为参数，返回一个新的函数。使用decorator用Python提供的@语法，简化decorator的书写。<br>利用Python的<code>*args</code> 和<code>**kw</code>，保证任意个数的参数总是能正常调用。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(x)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call '</span> + f.__name__ + <span class="string">'()...'</span></span><br><span class="line">        <span class="keyword">return</span> f(x)</span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> reduce(<span class="keyword">lambda</span> x,y: x*y, range(<span class="number">1</span>, n+<span class="number">1</span>))</span><br><span class="line"><span class="keyword">print</span> factorial(<span class="number">10</span>)         <span class="comment">#正常</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"><span class="keyword">print</span> add(<span class="number">1</span>, <span class="number">2</span>)             <span class="comment">#错误，参数不是一个</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(*args, **kw)</span>:</span>    <span class="comment">#保证任意个数的参数总是能正常调用。</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call '</span> + f.__name__ + <span class="string">'()...'</span></span><br><span class="line">        <span class="keyword">return</span> f(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> fn</span><br></pre></td></tr></table></figure></p>
<h1 id="python中编写带参数的decorator"><a href="#python中编写带参数的decorator" class="headerlink" title="python中编写带参数的decorator"></a>python中编写带参数的decorator</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(prefix)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log_decorator</span><span class="params">(f)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'[%s] %s()...'</span> % (prefix, f.__name__)</span><br><span class="line">            <span class="keyword">return</span> f(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> log_decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@log('DEBUG')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">print</span> test()</span><br><span class="line"></span><br><span class="line"><span class="comment">#拆开看</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">test = log(<span class="string">'DEBUG'</span>)(test)</span><br><span class="line"><span class="comment">#再展开</span></span><br><span class="line">log_decorator = log(<span class="string">'DEBUG'</span>)</span><br><span class="line">test = log_decorator(test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 又相当于</span></span><br><span class="line">log_decorator = log(<span class="string">'DEBUG'</span>)</span><br><span class="line"><span class="meta">@log_decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h1 id="Python中完善decorator"><a href="#Python中完善decorator" class="headerlink" title="Python中完善decorator"></a>Python中完善decorator</h1><p>用Python内置的functools可将原函数的属性复制到新函数。但原函数的原始参数信息无法获得。</p>
<h1 id="Python中偏函数"><a href="#Python中偏函数" class="headerlink" title="Python中偏函数"></a>Python中偏函数</h1><p>当一个函数有很多参数时，调用者就需要提供多个参数。如果减少参数个数，就可以简化调用者的负担。<br>functools.partial可以把一个参数多的函数变成一个参数少的新函数，少的参数需要在创建时指定默认值。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">int2</span><span class="params">(x, base=<span class="number">2</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> int(x, base)</span><br><span class="line"></span><br><span class="line">int2 =  functools.partial(int, base=<span class="number">2</span>)</span><br><span class="line">int2(<span class="string">'1000000'</span>)</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-yield与生成器"><a href="#Python-yield与生成器" class="headerlink" title="Python yield与生成器"></a>Python yield与生成器</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNum</span><span class="params">(x)</span></span></span><br><span class="line">    y = 0</span><br><span class="line">    <span class="keyword">while</span> y&lt;=x:</span><br><span class="line">        <span class="keyword">yield</span> y</span><br><span class="line">        y += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">g1 = getNum(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">print</span> g1.next()</span><br><span class="line"><span class="keyword">print</span> g1.next()</span><br></pre></td></tr></table></figure>
<p>函数中使用yield会生成一个生成器对象</p>
<h1 id="Python包和模块"><a href="#Python包和模块" class="headerlink" title="Python包和模块"></a>Python包和模块</h1><p>包：包是一个有层次的文件目录结构，定义了由n个模块或n个子包组成的Python应用程序执行环境。包是一个包含<strong>init</strong>.py 文件的目录，该目录下一定得有这个<strong>init</strong>.py文件和其它模块或子包。<br>模块：在Python可理解为对应于一个文件。</p>
<h2 id="Python之导入模块"><a href="#Python之导入模块" class="headerlink" title="Python之导入模块"></a>Python之导入模块</h2><p>要使用一个模块，必须首先导入该模块。Python使用import语句导入一个模块。<br>如果只希望导入某个模块的某几个函数，使用from import。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math <span class="comment"># 导入整个math模块</span></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> pow, sin, log <span class="comment"># 导入math模块pow() sin() log()函数</span></span><br></pre></td></tr></table></figure></p>
<p>如果使用import导入模块，必须通过模块名引用函数名。<br>通过from import导入可能会出现名字冲突，可利用别名解决。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> log</span><br><span class="line"><span class="keyword">from</span> logging <span class="keyword">import</span> log <span class="keyword">as</span> logger  <span class="comment"># logging的log有个logger的别名</span></span><br><span class="line"><span class="keyword">print</span> log(<span class="number">10</span>) <span class="comment"># 调用的math的log</span></span><br><span class="line">logger(<span class="number">10</span>, <span class="string">'import from logging'</span>) <span class="comment"># 调用的是logging的log</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Python动态导入模块"><a href="#Python动态导入模块" class="headerlink" title="Python动态导入模块"></a>Python动态导入模块</h2><p>如果导入的模块不存在，Python解释器会报ImportError错误。<br>因为Python是动态语言，解释执行，因此Python代码运行速度慢。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> cStringIO <span class="keyword">import</span> StringIO</span><br><span class="line">excerpt ImportError:</span><br><span class="line">    <span class="keyword">from</span> StringIO <span class="keyword">import</span> StringIO</span><br><span class="line"><span class="comment"># StringIO 和 cStringIO 都提供StringIO功能，StringIO 是纯Python代码编写的，而 cStringIO 部分函数是 C 写的，因此 cStringIO 运行速度更快。先尝试从cStringIO导入，如果失败了，再尝试从StringIO导入。</span></span><br></pre></td></tr></table></figure></p>
<p>import和from都是隐性赋值语句，import将整个模块对象赋值给一个变量名，from将一个或多个变量名赋值给导入此模块的模块中的同名对象</p>
<h2 id="import工作机制"><a href="#import工作机制" class="headerlink" title="import工作机制"></a>import工作机制</h2><ol>
<li>查找模块文件，在指定路径下搜索模块文件<ol>
<li>程序主目录</li>
<li>PYTHONPATH目录（如果设置了）</li>
<li>标准链接库目录</li>
<li>任何.pth文件的内容（如果存在.pth文件）</li>
</ol>
</li>
<li>编译为字节码，当文件导入时会编译，顶层文件的.pyc字节码文件在内部使用后会被丢弃，只有被导入文件才会留下.pyc文件</li>
<li>执行模块的代码创建其所定义的对象，模块文件的所有语句依次执行，从头到尾，而此步骤中任何对变量名的赋值运算，都会所得到的模块文件的属性</li>
</ol>
<p>模块只在第一次导入时执行如上步骤，后续的导入操作只不过是提取内存中已加载的模块对象，reload()可用于重新加载模块。</p>
<h2 id="Python-future"><a href="#Python-future" class="headerlink" title="Python future"></a>Python <strong>future</strong></h2><p>当新版本的一个特性与旧版本不兼容时，该特性将会在旧版本中添加到<strong>future</strong>中，以便旧的代码能在旧版本中测试新特性。</p>
<h2 id="Python按照第三方模块-使用pip"><a href="#Python按照第三方模块-使用pip" class="headerlink" title="Python按照第三方模块 使用pip"></a>Python按照第三方模块 使用pip</h2><h2 id="Python包"><a href="#Python包" class="headerlink" title="Python包"></a>Python包</h2><p>包将一组模块归并到一个目录中，此目录即为包，目录名即为包名。包是一个有层次的文件目录结构，定义了一个由模块和子包组成的Python应用程序执行环境。基于包，Python在执行导入模块时，可以指定模块的导入路径。<br>包导入语句的路径内的每个目录内必须有<code>__init__.py</code>文件，<code>__init__.py</code>可包含Python代码，但通常为空，仅用于扮演包初始化的挂钩、替目录产生模块命名空间以及使用目录导入时实现<code>from *</code>行为的角色。</p>
<h2 id="Python-distutils发布模块"><a href="#Python-distutils发布模块" class="headerlink" title="Python distutils发布模块"></a>Python distutils发布模块</h2><p>distutils模块能帮助完成模块或程序发布。<br>创建发布，将个代码文件组织到模块容器中，准备README或README.txt文件，在容器中创建setup.py文件<br><img src="/Picture/Python-distutils-1.jpg" alt="setup.py示例"><br><img src="/Picture/Python-distutils-2.jpg" alt="setup.py属性"><br>属性大体分为两类：元数据信息和包中的内容列表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py sdist</span><br></pre></td></tr></table></figure></p>
<p>可以为sdist指定格式： —formats</p>
<ol>
<li>zip:     zip file</li>
<li>gztar:   tar.gz file</li>
<li>bztar:   tar.bz2 file</li>
<li>ztar:    tar.Z file</li>
<li>tar:     tar file</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py bdist</span><br></pre></td></tr></table></figure>
<p>可以为bdist指定格式： —formats</p>
<ol>
<li>gztar:   tar.gz file</li>
<li>ztar:    tar.Z file</li>
<li>tar:     tar file</li>
<li>zip:     zip file</li>
<li>rpm      RPM Package</li>
<li>pkgtool: Solaris pkgtool</li>
<li>Wininst: Windows上自解压的zip格式的包</li>
<li>msi:     Microsoft Installer</li>
</ol>
<p><code>bdist_dump</code><br><code>bdist_rpm</code><br><code>bdist_wininst</code><br><code>bdist_msi</code></p>
<p>获取帮助<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python setup.py --help</span><br><span class="line">python setup.py --help-commands 所有可以使用的命令</span><br><span class="line">python setup.py COMMAND --help 获取特定命令的帮助</span><br><span class="line">python setup.py COMMAND --help-formats 获取给定命令支持使用的格式</span><br></pre></td></tr></table></figure></p>
<h2 id="Python安装包"><a href="#Python安装包" class="headerlink" title="Python安装包"></a>Python安装包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<p>第三方模块默认安装路径默认为site-packages</p>
<h1 id="Python面向对象编程"><a href="#Python面向对象编程" class="headerlink" title="Python面向对象编程"></a>Python面向对象编程</h1><p>类用于定义抽象类型。<br>实例根据类的定义被创建出来。</p>
<h2 id="Python定义类并创建实例"><a href="#Python定义类并创建实例" class="headerlink" title="Python定义类并创建实例"></a>Python定义类并创建实例</h2><p>在Python中，类通过class关键词定义。<br>类体可以包含：申明语句、类成员定义、数据属性、方法<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">xiaoming = Person()</span><br><span class="line">xiaohong = Person()</span><br></pre></td></tr></table></figure></p>
<h2 id="Python中创建实例属性"><a href="#Python中创建实例属性" class="headerlink" title="Python中创建实例属性"></a>Python中创建实例属性</h2><p>每个实例可以拥有各自不同的属性，可以直接给其属性赋值。实例的属性可以像腹痛变量一样进行操作。</p>
<h2 id="Python中初始化实例属性"><a href="#Python中初始化实例属性" class="headerlink" title="Python中初始化实例属性"></a>Python中初始化实例属性</h2><p>在定义类时，可以为类添加特殊的<strong>init</strong>()方法，在创建实例时，<strong>init</strong>方法会被自动调用。可以在此为每个实例都统一加上属性。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Persion</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, gender, birth)</span>:</span></span><br><span class="line">        self.name =  name</span><br><span class="line">        self.gender = gender</span><br><span class="line">        self.birth = birth</span><br><span class="line"></span><br><span class="line">xiaoming = Person(<span class="string">'Xiao ming'</span>, <span class="string">'Male'</span>, <span class="string">'1992-1-1'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Persion</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, gender, birth, **kw)</span>:</span></span><br><span class="line">        self.name =  name</span><br><span class="line">        self.gender = gender</span><br><span class="line">        self.birth = birth</span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> kw.iteritems():</span><br><span class="line">            setattr(self, k, v)</span><br><span class="line"></span><br><span class="line">xiaohong = Person(<span class="string">'Xiao hong'</span>, <span class="string">'Female'</span>, <span class="string">'1992-1-1'</span>, jog=<span class="string">"student"</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>init</strong>方法的第一个参数必须是self，后面参数可以自由指定，和定义函数没有任何区别。<br>可以使用setattr将任意关键词参数作为属性赋值给实例。</p>
<h2 id="Python访问限制"><a href="#Python访问限制" class="headerlink" title="Python访问限制"></a>Python访问限制</h2><p>Python对属性权限的控制通过函数名来实现，如果一个属性由双下划线开头(<code>__</code>)，该属性无法被外部访问。<br>注意以<code>__</code>开头，以<code>__</code>结尾的属性可被外界访问，<code>__xxx__</code>定义的属性被称为特殊属性。</p>
<h2 id="Python创建类属性"><a href="#Python创建类属性" class="headerlink" title="Python创建类属性"></a>Python创建类属性</h2><p>类是模版，实例则是根据类创建的对象。绑定在一个实例上的属性不会影响其他实例，但是，类本身也是一个对象，如果在类上绑定一个属性，则所有实例都可以访问类的属性，并且，所有实例访问的类属性都是同一个！即：实例属性每个实例各自拥有，互相独立，而类属性有且只有一份。<br>定义类属性直接在class中定义：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    address = <span class="string">"Earth"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span></span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> Person.address</span><br><span class="line"></span><br><span class="line">Person.email = <span class="string">'1111@google.com'</span></span><br><span class="line">Person.address = <span class="string">'china'</span></span><br></pre></td></tr></table></figure></p>
<p>因为类属性是直接绑定在类上的，所有，访问类属性不需要创建实例，就可以直接访问。<br>对一个实例调用类的属性也是可以访问的，所有实例都可以访问到它所属的类的属性。<br>由于Python是动态语言，类属性也是可以动态添加和修改的。<br>因为类属性只有一份，所以，当类的属性改变时，所有实例访问到的类属性都改变了。</p>
<h2 id="Python中类属性和实例属性冲突"><a href="#Python中类属性和实例属性冲突" class="headerlink" title="Python中类属性和实例属性冲突"></a>Python中类属性和实例属性冲突</h2><p>当实例属性和类属性重名时，实例属性优先级高，它将屏蔽掉对类属性的访问。<br>千万不要在实例上修改类属性，它实际上并没有修改类属性，而是给实例绑定了一个实例属性。</p>
<h2 id="方法的可用变量"><a href="#方法的可用变量" class="headerlink" title="方法的可用变量"></a>方法的可用变量</h2><p>实例变量：指定变量名称及实例自身进行引用<br>局部变量：方法内部创建的变量，可直接使用<br>类变量：通过指定变量名与类名进行引用<br>全局变量：直接使用</p>
<h2 id="Python中定义实例方法"><a href="#Python中定义实例方法" class="headerlink" title="Python中定义实例方法"></a>Python中定义实例方法</h2><p>实例的方法就是在类中定义的函数，第一个参数永远是self，执行调用该方法的实例本身，其他参数和一个普通函数是完全一样的。在实例方法内部可以访问所有实例属性。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span></span></span><br><span class="line"><span class="class">    <span class="title">def</span> <span class="title">__init__</span><span class="params">(self, name)</span></span></span><br><span class="line">        self.__name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span></span></span><br><span class="line"><span class="function">        <span class="title">return</span> <span class="title">self</span>.<span class="title">__name</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line">p = Person('bob')</span><br><span class="line"><span class="keyword">print</span> p.get_name()</span><br></pre></td></tr></table></figure></p>
<h2 id="Python中方法也是属性"><a href="#Python中方法也是属性" class="headerlink" title="Python中方法也是属性"></a>Python中方法也是属性</h2><p>在class中定义的实例方法其实也是属性，实际上是一个函数对象。<br>使用types.MethodType()可以把一个函数变成一个方法。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> types</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn_get_grade</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> self.score &gt;= <span class="number">80</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'A'</span></span><br><span class="line">    <span class="keyword">if</span> self.score &gt;= <span class="number">60</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'B'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'C'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, score)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.score = score</span><br><span class="line"></span><br><span class="line">p1 = Person(<span class="string">'Bob'</span>, <span class="number">90</span>)</span><br><span class="line">p1.get_grade = types.MethodType(fn_get_grade, p1, Person)</span><br><span class="line"><span class="keyword">print</span> p1.get_grade()</span><br><span class="line"></span><br><span class="line">p2 = Person(<span class="string">'Alice'</span>, <span class="number">65</span>)</span><br><span class="line"><span class="keyword">print</span> p2.get_grade() <span class="comment"># 错误 p2没有get_grade方法</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Python中定义类方法"><a href="#Python中定义类方法" class="headerlink" title="Python中定义类方法"></a>Python中定义类方法</h2><p>Python类中定义的方法分为类方法和实例方法。<br>在class中定义的全部都是实例方法，实例方法第一个参数是实例本身。<br>定义类方法需要使用@classmethod，将方法绑定到Person类上，而非类实例上。类方法的第一个参数传入类本身，因为是在类上调用，而非实例上调用，因此类方法无法获得任何实例变量，只能获得类的引用。</p>
<h2 id="Python类连结至超类的方式"><a href="#Python类连结至超类的方式" class="headerlink" title="Python类连结至超类的方式"></a>Python类连结至超类的方式</h2><p>将超类列在类头部的括号内，其从左到右的顺序决定树的顺序，从下至上，从左至右</p>
<h1 id="Python继承"><a href="#Python继承" class="headerlink" title="Python继承"></a>Python继承</h1><p>总是从某个类继承，如果没有则需要继承object类。<br>不要忘记调用<code>super().__init__</code>用来初始化父类属性<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span></span></span><br><span class="line"><span class="function">        <span class="title">super</span><span class="params">(MyClass, self)</span>.<span class="title">__init__</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></p>
<h2 id="Python中判断类型"><a href="#Python中判断类型" class="headerlink" title="Python中判断类型"></a>Python中判断类型</h2><p>函数isinstance()可以判断一个变量的类型，既可以用于Python内置的数据类型，也可以用于自定义类。</p>
<h2 id="Python多态"><a href="#Python多态" class="headerlink" title="Python多态"></a>Python多态</h2><p>类具有继承关系，并且子类类型可以向上转型看做父类类型。</p>
<h2 id="Python多重继承"><a href="#Python多重继承" class="headerlink" title="Python多重继承"></a>Python多重继承</h2><p>Python允许从多个父类继承，称为多重继承</p>
<h2 id="Python获取对象信息"><a href="#Python获取对象信息" class="headerlink" title="Python获取对象信息"></a>Python获取对象信息</h2><ol>
<li>用type()函数获取变量的类型，返回一个Type对象。</li>
<li>用dir()函数获取变量的所有属性。</li>
</ol>
<h1 id="Python定制类"><a href="#Python定制类" class="headerlink" title="Python定制类"></a>Python定制类</h1><h2 id="Python的特殊方法"><a href="#Python的特殊方法" class="headerlink" title="Python的特殊方法"></a>Python的特殊方法</h2><ol>
<li>特殊方法定义在class中。</li>
<li>不需要直接调用，某些函数或者操作符会调用对应的特殊方法。</li>
</ol>
<h2 id="str和repr"><a href="#str和repr" class="headerlink" title="str和repr"></a><strong>str</strong>和<strong>repr</strong></h2><p>如果要把一个类的实例变成str，需要实现特殊方法<code>__str__()</code>。<br><code>__repr__()</code>方法用于显示给开发人员。</p>
<h2 id="cmp"><a href="#cmp" class="headerlink" title="cmp"></a><strong>cmp</strong></h2><p>对int、str等内置数据类型排序时，Python的sorted()按照默认的比较函数cmp排序，如果对自定义类的实例排序，必须提供自定义的特殊方法<code>__cmp__()</code>。</p>
<h2 id="len"><a href="#len" class="headerlink" title="len"></a><strong>len</strong></h2><h2 id="and"><a href="#and" class="headerlink" title="and"></a><strong>and</strong></h2><h2 id="int"><a href="#int" class="headerlink" title="int"></a><strong>int</strong></h2><h2 id="property"><a href="#property" class="headerlink" title="@property"></a>@property</h2><h2 id="slots"><a href="#slots" class="headerlink" title="slots"></a><strong>slots</strong></h2><h2 id="call"><a href="#call" class="headerlink" title="call"></a><strong>call</strong></h2><h1 id="类、实例和其它对象的内建函数"><a href="#类、实例和其它对象的内建函数" class="headerlink" title="类、实例和其它对象的内建函数"></a>类、实例和其它对象的内建函数</h1><ol>
<li>issubclass() 布尔函数，判断一个类是否由另一个类派生，语法：<code>issubclass(sub, sup)</code></li>
<li>isinstance() 布尔函数，判断一个对象是否是给定类的实例，语法：<code>isinstance(obj1, class_obj2)</code></li>
<li>hasattr() 布尔函数，判断一个对象是否拥有指定属性，语法：<code>hasattr(obj, attr)</code>  同类函数<code>getattr()</code>、<code>setattr()</code>、<code>delattr()</code></li>
<li>super() 在子类中找到其父类以便于调试其属性，一般仅采用非绑定方式调用祖先类方法，而super()可用于传入实例或类型对象，语法：<code>super(type[,boj])</code></li>
</ol>
<h1 id="Python运算符重载"><a href="#Python运算符重载" class="headerlink" title="Python运算符重载"></a>Python运算符重载</h1><p>运算符重载在方法中拦截内置操作，当类的实例出现内置操作时，Python自动调用自定义方法，并返回调用结果。运算符重载荣类拦截常规的Python运算，重载使类实例的行为像内置类型，重载通过提供特殊名称的类方法实现。</p>
<p><img src="/Picture/Python_op.jpg" alt="Python运算符重载"></p>
<p><img src="/Picture/Python_op_2.jpg" alt="Python运算符重载"></p>
<p>Python函数的属性：</p>
<ol>
<li><code>__doc__</code></li>
<li><code>__name__</code></li>
<li><code>__dict__</code></li>
<li><code>__code__</code></li>
<li><code>__globals__</code></li>
</ol>
<p>Python方法的属性：</p>
<ol>
<li><code>__doc__</code></li>
<li><code>__name__</code></li>
<li><code>__class__</code>: 方法所属类</li>
<li><code>__func__</code>： 实现该方法的函数对象</li>
<li><code>__self__</code>：调用次方法的实例</li>
</ol>
<p>Python内置函数：</p>
<ol>
<li><code>__doc__</code></li>
<li><code>__name__</code></li>
<li><code>__self__</code></li>
</ol>
<p>Python类：</p>
<ol>
<li><code>__doc__</code></li>
<li><code>__name__</code></li>
<li><code>__bases__</code></li>
<li><code>__func__</code></li>
<li><code>__module__</code></li>
</ol>
<h1 id="Python异常"><a href="#Python异常" class="headerlink" title="Python异常"></a>Python异常</h1><p>Python的运行时错误称为异常</p>
<ol>
<li>语法错误</li>
<li>逻辑错误</li>
</ol>
<p>Python异常是一个对象，表示错误或意外情况，在Python检测到一个错误时，将触发一个异常，Python可以通过异常传导机制传递一个异常，发出一个异常情况的信号。程序员也可以在代码中手动触发异常。<br>Python异常可以理解为程序出现了错误而在正常控制流程以外采取的行为。</p>
<ol>
<li>解释器触发异常，此时当前程序流被打断</li>
<li>异常处理</li>
</ol>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>Python的默认处理：停止程序，打印错误信息。可以使用try语句处理异常并从异常中恢复</p>
<h2 id="事件通知"><a href="#事件通知" class="headerlink" title="事件通知"></a>事件通知</h2><p>用于发出有效状态信号</p>
<h2 id="特殊情况处理"><a href="#特殊情况处理" class="headerlink" title="特殊情况处理"></a>特殊情况处理</h2><p>无法调整代码去处理的场景</p>
<h2 id="终止行为"><a href="#终止行为" class="headerlink" title="终止行为"></a>终止行为</h2><p>try/finally语句可确保执行必需的结束处理机制</p>
<h2 id="非常规流程控制"><a href="#非常规流程控制" class="headerlink" title="非常规流程控制"></a>非常规流程控制</h2><p>异常是一种高级跳转机制（goto）</p>
<h2 id="异常通过try语句来检测"><a href="#异常通过try语句来检测" class="headerlink" title="异常通过try语句来检测"></a>异常通过try语句来检测</h2><p>任何在try语句块里的代码都会被检测，以检测有无异常发生</p>
<h2 id="try语句两种形式"><a href="#try语句两种形式" class="headerlink" title="try语句两种形式"></a>try语句两种形式</h2><ol>
<li><p>try-execpt：检测和处理异常，支持多个execpt，支持使用else子句处理没有探测异常的执行的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#定义进行异常监控的一段代码，并提供处理异常的机制</span><br><span class="line">try:</span><br><span class="line">    try_suite</span><br><span class="line">execpt Exception[, reason]:</span><br><span class="line">    execpt_suit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    try_suite</span><br><span class="line">execpt Exception1[, reason]:</span><br><span class="line">    execpt_suit1</span><br><span class="line">execpt (Exception2, Exception3, ...)[, reason]: # 一次捕获多个异常使用元组</span><br><span class="line">    execpt_suit2</span><br><span class="line">execpt: #空execpt用于捕获所有异常</span><br><span class="line">    suit</span><br><span class="line">else:</span><br><span class="line">    else_suit   #没有异常发生时else分句才会执行</span><br><span class="line">#没有符合的execpt语句时，异常会向上传递到程序之前的try中或者到进程的顶层</span><br></pre></td></tr></table></figure>
</li>
<li><p>try-finally：仅检测异常并做一些必要的处理工作，仅能有一个finally，无论异常是否发生，finally子句都会都会执行，finally中所有代码执行完毕后会向上一层引发异常。</p>
</li>
</ol>
<h2 id="try的复合形式"><a href="#try的复合形式" class="headerlink" title="try的复合形式"></a>try的复合形式</h2><p>try-execpt-finally</p>
<h2 id="raise-语句可显式触发异常"><a href="#raise-语句可显式触发异常" class="headerlink" title="raise 语句可显式触发异常"></a>raise 语句可显式触发异常</h2><p>raise [SomeException [, args[, traceback]]]</p>
<ol>
<li>SomeException可选，异常的名字，仅能使用字符串、类或实例</li>
<li>args 可选，以元组的形式传递给异常的参数</li>
<li>traceback 可选，异常触发时新生成的一个用于异常-正常化的跟踪记录，多用于重新引发异常</li>
</ol>
<p><img src="/Picture/Python-raise.jpg" alt="raise语句的用法大全"></p>
<h2 id="Python异常对象"><a href="#Python异常对象" class="headerlink" title="Python异常对象"></a>Python异常对象</h2><p>Python异常是内置的经典类Exception的子类的实例，为了向后兼容，Python允许使用字符串或任何经典类实例，Python2.5后，Exception是从BaseException继承的新式类<br>Python自身引发的所有异常都是Exception的子类的实例，大多的标准异常都是由StandardError派生的，其中三个抽象子类</p>
<ol>
<li>ArithmeticError  由算数错误而引发的异常基类 OverflowError ZeroDivisonError FlootingPointError</li>
<li>LookupError  LookupError 容器在接收到一个无效键或索引时引发的异常的基类 IndexEeror KeyError</li>
<li>EnvironmentError 由于外部原因而导致的异常的基类  IOError OSError WindowsError</li>
</ol>
<h2 id="Python-assert语句"><a href="#Python-assert语句" class="headerlink" title="Python assert语句"></a>Python assert语句</h2><p>assert语句用于在程序中引入调试代码<br>assert condition[, expression]<br>如果condition条件满足，则assert不做任何操作<br>如果condition条件不满足，则assert使用expression作为参数实例化AssertionError并引发结果实例<br>如果Python运行使用-O，则assert是一个空操作，编译器不为assert语句生成代码，不使用-O选项，则<strong>debug</strong>内置变量为True，否则其值为False。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># assert condition[, expression] 相当于</span></span><br><span class="line"><span class="keyword">if</span> __debug__:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> condition:</span><br><span class="line">        <span class="keyword">raise</span> AssertionError, &lt;expression&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="Python程序的执行"><a href="#Python程序的执行" class="headerlink" title="Python程序的执行"></a>Python程序的执行</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source code         PVM                     bytecode                PVM</span><br><span class="line">    .py         ----Complier------&gt;          .pyc            -----Interpreter----&gt;          processor</span><br></pre></td></tr></table></figure>
<p>python源代码第一次执行时被Python虚拟器编译为Python字节码，然后Python虚拟器根据Python字节码执行程序。</p>
<h1 id="Python的实现"><a href="#Python的实现" class="headerlink" title="Python的实现"></a>Python的实现</h1><p>Cpython  原始、标准的实现方式<br>Jythin  用于和Java语言集成的实现<br>IronPython  用于与.NET框架集合实现</p>
<h1 id="Python性能优化工具"><a href="#Python性能优化工具" class="headerlink" title="Python性能优化工具"></a>Python性能优化工具</h1><p>Psyco   Python语言的一个扩展模块，即时对程序代码进行算法优化，可以一定程度提高程序的执行速度，尤其是程序中有大量循环操作时，目前该工具研发工作已经停止，由pypy所替代。<br>PyPy    PyPy是用Python实现的Python解释器，Python语言的动态编译器，是Psyco的后继项目。可以运行在Linux32和64位、MocOS和Windows的32位平台上。<br>Shed Skin   Python编译器，能将Pythona代码转化为优化的C++代码。</p>
<h1 id="Python程序文件"><a href="#Python程序文件" class="headerlink" title="Python程序文件"></a>Python程序文件</h1><p>Python程序可分解为模块、语句、表达式和对象</p>
<ol>
<li>程序由模块组成</li>
<li>模块包含语句</li>
<li>语句包含表达式</li>
<li>表达式建立并处理对象<ol>
<li>表达式是”某事”，而语句是”做某事(即指令)”。</li>
<li>语句的特性：改变令事物。</li>
</ol>
</li>
</ol>
<p>面向过程：以指令为中心，由指令处理数据<br>面向对象：以数据为中心，所有的代码都围绕数据展开</p>
<h1 id="Python要素-基本数据类型"><a href="#Python要素-基本数据类型" class="headerlink" title="Python要素 基本数据类型"></a>Python要素 基本数据类型</h1><h1 id="Python要素-对象引用"><a href="#Python要素-对象引用" class="headerlink" title="Python要素 对象引用"></a>Python要素 对象引用</h1><ol>
<li>Python将所有数据都存为内存对象，Python中变量其实是指向内存对象的引用。</li>
<li>动态类型：在任何时刻，只要需要，某个对象引用都可以重新引用一个不同的对象。</li>
<li>内建函数type()用于返回给定数据项的数据内型。</li>
<li>“=”用于将变量名与内存中的某个对象绑定：如果对象事先存在，就直接进行绑定；否则，则在”=”创建引用的对象。</li>
<li>注意，变量名没有类型，对象才有。</li>
<li>列表和元素并不存储数据，而是存放对象引用</li>
</ol>
<h1 id="Python要素-组合数据类型"><a href="#Python要素-组合数据类型" class="headerlink" title="Python要素 组合数据类型"></a>Python要素 组合数据类型</h1><h1 id="Python要素-逻辑操作符"><a href="#Python要素-逻辑操作符" class="headerlink" title="Python要素 逻辑操作符"></a>Python要素 逻辑操作符</h1><p>Python提供4组逻辑运算</p>
<ol>
<li>身份操作符 is，判断左端对象引用是否相同于右端对象，也可以与None进行。</li>
<li>比较操作符 &lt;, &gt;, &lt;=, &gt;=, !=, ==</li>
<li>成员操作符 in 或 not in：测试成员关系</li>
<li>逻辑运算符：and、or、not</li>
</ol>
<h1 id="Python要素-控制流语句"><a href="#Python要素-控制流语句" class="headerlink" title="Python要素 控制流语句"></a>Python要素 控制流语句</h1><h1 id="Python要素-算数运算符"><a href="#Python要素-算数运算符" class="headerlink" title="Python要素 算数运算符"></a>Python要素 算数运算符</h1><p>Python提供了完整的算数操作符。<br>Python的int类型是不可变的，因此给一个int变成加减其实是重新创建一个新的变量来存储结果后将变量名执行重新绑定。<br><img src="/Picture/python_int.jpg" alt="Python int算数操作"></p>
<h1 id="Python要素-输入-输出"><a href="#Python要素-输入-输出" class="headerlink" title="Python要素 输入/输出"></a>Python要素 输入/输出</h1><p>命令行输出 print()函数 python3    print语句 python2<br>命令行输入 input() <code>raw_input()</code><br>Python解释器提供3种标准文件对象，标准输入sys.stdio 标准输出sys.stdout 标准错误sys.stderr, 存在与sys模块中。</p>
<h1 id="Python要素-函数"><a href="#Python要素-函数" class="headerlink" title="Python要素 函数"></a>Python要素 函数</h1><p>callable()函数可以检测函数是否可调用。<br>Python有很多内置函数 <code>__builtins__</code><br>Python有很多标准库，可以导入后直接使用。</p>
<h1 id="Python-语句和语法"><a href="#Python-语句和语法" class="headerlink" title="Python 语句和语法"></a>Python 语句和语法</h1><p>注释 #<br>续行 \      ‘’’<br>代码组 缩进相同的一组语句可构成代码块 首行以关键字开始，以冒号结束，Python使用缩进来分隔代码组，同一代码组的代码行必须严格左对齐，否则会造成语法错误。<br>同一行多个语句，以;为分隔符<br>模块 每个Python脚本文件都是一个模块</p>
<h1 id="Python-文件结构"><a href="#Python-文件结构" class="headerlink" title="Python 文件结构"></a>Python 文件结构</h1><ol>
<li>起始行 #/usr/bin/env python</li>
<li>模块文档(文档字符串)    <code>__doc__</code></li>
<li>模块导入</li>
<li>(模块全局)变量定义</li>
<li>类定义(若有)</li>
<li>函数定义(若有)</li>
<li>主程序</li>
</ol>
<p>每个模块都有<code>__name__</code>内建变量，此变量根据调用该模块的方式而变化。<code>__name__</code>指示模块该如何加载，如果模块是被导入，<code>__name__</code>的值是模块名字  如果模块是直接执行<code>__name__</code>的值是<code>__main__</code></p>
<h1 id="Python两个对象比较"><a href="#Python两个对象比较" class="headerlink" title="Python两个对象比较"></a>Python两个对象比较</h1><ol>
<li>值比较：对象中的数据是否相同</li>
<li>身份比较：两个变量引用的是否同一个对象  也就是内存地址比较</li>
<li>类型比较：两个对象的类型是否相同</li>
</ol>
<h1 id="Python类型转换"><a href="#Python类型转换" class="headerlink" title="Python类型转换"></a>Python类型转换</h1><p><strong>个人理解Python中类型转换，都是根据原有对象新建对象</strong><br>str() repr()或format():字符串<br>int():整数<br>float():浮点数<br>list():列表<br>tuple():元组<br>set():集合<br>dict():字典，传入参数必须是(key, value)的元组序列<br>chr():字符(ASCII码)，传入参数为整数<br>ord():整数，传入参数为字符<br>hex():16进制整数<br>bin()<br>cot()</p>
<h1 id="Python数字类型"><a href="#Python数字类型" class="headerlink" title="Python数字类型"></a>Python数字类型</h1><p>Python 5种数字类型：布尔型(True 1  False 0)、整数、长整数、浮点数、复数，所有数字类型均不可变。<br>数字操作： 加<code>+</code> 减<code>-</code> 乘<code>*</code> 除<code>/</code> 截断除法<code>//</code>  乘方 <code>**</code>  取模<code>%</code><br>位操作：左移 <code>&lt;&lt;</code> 右移 <code>&gt;&gt;</code>   按位与&amp; 按位或| 按位异或^ 按位求反~</p>
<h1 id="Python序列类型"><a href="#Python序列类型" class="headerlink" title="Python序列类型"></a>Python序列类型</h1><p>Python内置序列类型list tuple str  str是字符序列 list和tuple是任何Python对象序列   str和tuple属于不可变序列  所有序列都支持迭代<br>所有序列类型支持索引、切片<br>min()取序列中的最小值<br>max()取序列中的最大值<br>sum()对序列求和<br>len()求序列元素个数<br>all()检查序列中所有元素为True</p>
<h1 id="Python列表"><a href="#Python列表" class="headerlink" title="Python列表"></a>Python列表</h1><p>支持在原处修改：修改指定的索引元素、修改指定分片、删除语句、内置方法<br>合并两个列表，返回一个新的列表，不会修改原列表<br>in:成员关系判断字符，用法 obj in container<br>not in: obj not in container<br>列表解析：[]<br>列表复制：浅拷贝  深拷贝(copy.deepcopy())</p>
<h1 id="Python元组"><a href="#Python元组" class="headerlink" title="Python元组"></a>Python元组</h1><p>任意对象的有序集合，通过索引访问其中内容，不可变对象，长度固定<br>in<br>not in</p>
<p><img src="/Picture/python-list-fun.jpg" alt="序列类型的操作 列表类型的操作"></p>
<h1 id="Python集合"><a href="#Python集合" class="headerlink" title="Python集合"></a>Python集合</h1><p>只能使用工厂函数set()和frozenset()创建<br>不支持：索引、切片、元素获取<br><img src="/Picture/python-set-fun.jpg" alt="集合类型的操作"></p>
<h1 id="Python引用计数"><a href="#Python引用计数" class="headerlink" title="Python引用计数"></a>Python引用计数</h1><p>sys模块 sys.getrefcount()获得对象的引用计数<br>Python对象引用计数为0，对象被释放，归还内存</p>
<h1 id="Python真假"><a href="#Python真假" class="headerlink" title="Python真假"></a>Python真假</h1><ol>
<li>所有非0数字和非空对象都为真</li>
<li>数字0、空对象和特殊对象None均为假</li>
</ol>
<h1 id="Python解释器环境与选项"><a href="#Python解释器环境与选项" class="headerlink" title="Python解释器环境与选项"></a>Python解释器环境与选项</h1><p>python [option] [-c cmd | filename | -] [ args ]<br><img src="/Picture/Python-option-cmd.jpg" alt="Python解释器启动选项"><br><img src="/Picture/Python-env.jpg" alt="Python解释器环境变量"></p>
<h1 id="Python文件操作"><a href="#Python文件操作" class="headerlink" title="Python文件操作"></a>Python文件操作</h1><p>Python内置函数open()用于打开文件和创建文件对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(name [,mode[,bufsize]])</span><br></pre></td></tr></table></figure></p>
<p>open方法可以接受三个参数：文件名、模式、缓冲区参数</p>
<ol>
<li>open函数返回一个文件对象</li>
<li>mode指定文件打开模式 r只读 w写入(如果没有文件会自动创建一个) a附加 r+默认读模式打开支持写操作 w+默认写模式打开支持读操作 a+默认附加模式打开支持读操作 在r、w、a、r+、w+、a+后面中附加b，表示以二进制方式打开</li>
<li>bufsize定义输出缓存 0表示无输出缓存 1表示使用缓存 负数表示使用系统默认配置 正数表示使用近似指定大小的缓冲。</li>
</ol>
<p>file.next() 返回文件中下一行内容 不会移动文件游标<br>file.close() 关闭当前文件<br>file.fileno() 返回文件描述符<br>file.readline() 读取文件中一行<br>file.readlines() 以列表形式每行为一个元素，返回所有文件内容<br>file.tell() 返回当前文件游标的位置(第n个字节处)<br>file.read(size) 返回size个字节的数据，返回字符串<br>file.seek(offset [, whencel]) 移动文件游标到指定位置 offset偏移量  whencel 偏移起点 0文件头 1当前位置 2文件尾部 默认为0<br>file.write(str) 将str写入文件中<br>file.writeline(list) 将字符串列表list写入文件中<br>file.flush() 将数据从缓存区刷新到磁盘中<br>file.isatty() 判断该文件是否为终端设置文件 如果是返回True 否则返回False<br>file.truncate(size) 将文件截取保留size大小的文件，其余的删除</p>
<p>file.closed 返回文件是否已经关闭 返回True表示已关闭 返回False表示未关闭<br>file.encoding 返回文件编码格式<br>file.mode 返回文件打开模式<br>file.name 当前打开文件名称<br>file.softspace</p>
<h1 id="Python-OS模块"><a href="#Python-OS模块" class="headerlink" title="Python OS模块"></a>Python OS模块</h1><p>目录相关<br>os.mkdir(path) 创建目录path<br>os.mkdirs(path) 创建目录path如果父目录不存在先创建父目录<br>os.rmdir(path) 删除目录path<br>os.rmdirs(path) 删除多级目录<br>os.getcwd() 返回当前目录<br>os.chdir(path) 改变当前目录为path<br>os.fchdir(file) 通过文件描述符改变当前目录<br>os.chroot() 设定当前进程的根目录<br>os.listdir(path) 列出指定目录下的所有文件名</p>
<p>文件相关<br>os.stat(path) 获取path的状态信息<br>os.remove(file) 删除文件<br>os.rename(file) 文件重命名<br>os.symlink(src, dst) 创建链接<br>os.utime(path) 更新时间<br>os.walk()</p>
<p>权限相关<br>os.access(path, mode) 检验权限是否存在<br>os.chmod(path, mode) 修改权限为mode<br>os.chown(path, pid, gid) 改变文件的属主和属组权限)<br>os.umask() 设置默认权限模式</p>
<p>文件描述符<br>os.open()<br>os.close()<br>os.read()<br>os.write()</p>
<p>os.path 文件路径相关<br>os.path.basename() 文件名<br>os.path.dirname() 目录名<br>os.path.join() 整合路径<br>os.path.split() 返回dirname() basename()元组<br>os.path.splitext() 返回(filename, extension)元组</p>
<p>os.path.getatime()<br>os.path.getctime()<br>os.path.getmtime()<br>os.path.getsize() 返回文件大小</p>
<p>os.path.exists() 判断指定文件是否存在<br>os.path.isabs() 判断给定路径是否为绝对路径<br>os.path.isdir() 判断是否为目录<br>os.path.isfile() 判断是否为文件<br>os.path.islink() 判断是否为链接<br>os.path.ismount() 判断是否为挂载点<br>os.path.samefile() 判断两个路径是否指向同一文件</p>
<p>对象流式化、持久化<br>pickle</p>
<p>Python 文件对象可迭代<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [14]: f = open(&apos;/etc/passwd&apos; , &apos;r&apos;)</span><br><span class="line"></span><br><span class="line">In [15]: for line in f:</span><br><span class="line">   ....:     print line</span><br><span class="line">   ....:</span><br></pre></td></tr></table></figure></p>
<h1 id="Python正则表达式"><a href="#Python正则表达式" class="headerlink" title="Python正则表达式"></a>Python正则表达式</h1><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>正则表达式，使用单个字符串来描述、匹配一系列符合某个语法规则的字符串。<br>常用正则表达式的表达式符号和特殊字符</p>
<ol>
<li>literal 匹配字符串的值  例如: foo</li>
<li><code>re1|re2</code> 匹配正则表达式re1或re2  例如: <code>foo|bar</code></li>
<li><code>.</code> 匹配任何单个字符(换行符除外) 例如: <code>b.b</code></li>
<li><code>^</code> 匹配字符串的开始 例如: <code>^Dear</code></li>
<li><code>$</code> 匹配字符串的结尾</li>
<li><code>*</code> 匹配前面出现的正则表达式零次或多次 例如: <code>[A-Za-z0-9]*</code></li>
<li><code>+</code> 匹配前面出现的正则表达式一次或多次 例如: <code>[a-z]+.com</code></li>
<li><code>?</code> 匹配前面出现的正则表达式零次或一次 例如: <code>goo?</code></li>
<li><code>{N}</code> 匹配前面出现的正则表达式N次 例如: <code>[0-9]{3}</code></li>
<li><code>{M,N}</code> 匹配前面出现的正则表达式M次到N次 例如: <code>[0-9]{5,9}</code></li>
<li><code>[...]</code> 匹配字符组里出现的任意一个字符 例如: <code>[aeiou]</code></li>
<li><code>[..x-y..]</code> 匹配从字符x到字符y的任意一个字符 例如: <code>[0-9]</code>, <code>[A-Za-z]</code></li>
<li><code>[^...]</code> 不匹配此字符集中出现的任何一个字符，包括某一范围的字符（如果在次字符集中出现）例如: <code>[^aeiou]</code>, <code>[^A-Za-z0-9_]</code></li>
<li><code>(*|+|?|{})?</code> 用于上面出现的任何“非贪婪”版本重复匹配次数符号<code>(*,+,?,{})</code> 例如: <code>.*?[a-z]</code></li>
<li><code>(...)</code> 匹配封闭括号中正则表达式(RZ), 并保存为子组 例如: <code>([0-9]{3})?,f(oo|u)bar</code></li>
<li><code>\d</code> 匹配任何数字，和<code>[0-9]</code>一样(<code>\D</code>是<code>\d</code>的反义：任何非数字符) 例如: <code>data\d+.txt</code></li>
<li><code>\w</code> 匹配任何数字字母字符，和<code>[A-Za-z0-9]</code>相同(<code>\W</code>是<code>\w</code>的反义) 例如：<code>[A-Za-z\_]w+</code></li>
<li><code>\s</code> 匹配任何空白符，和<code>[\n\t\r\v\f]</code>相同，(<code>\S</code>是<code>\s</code>的反义) 例如: <code>of\sthe</code></li>
<li><code>\b</code> 匹配单词边界(<code>\B</code>是<code>\b</code>的反义) 例如: <code>\bThe\b</code></li>
<li><code>\c</code> 逐一匹配特殊字符c(即，取消它的特殊含义，按字面匹配) 例如: <code>\.</code>, <code>\\</code>, <code>\*</code></li>
<li><code>\A(\Z)</code>匹配字符串的起始(结束) 例如: <code>\ADear</code></li>
</ol>
<h2 id="Python正则表达式模块"><a href="#Python正则表达式模块" class="headerlink" title="Python正则表达式模块"></a>Python正则表达式模块</h2><p>re模块<br>re.match() 尝试用正则表达式模式从字符串的开头匹配，如果匹配成功，则返回一个匹配对象，否则返回None<br>re.search() 在字符串中查找正则表达式模式第一次出现，如果匹配成功，则返回一个匹配对象，否则返回None<br>re.findall() 在字符串中查找正则表达式默认的所有(非重复)出现；返回一个匹配对象的列表<br>re.split() 根据正则表达式中的分隔符将字符分割为一个列表，返回成功匹配的列表，可以设定次数（默认是分割所有匹配的地方）<br>re.sub() 把字符串中所有匹配正则表达式的地方替换为字符串，如果没有次数限制，则对所有匹配的地方进行替换，并返回替换后整个串<br>re.subn() 和re.sub()功能相同，不过其返回值为元组，包含其替换后的串和替换次数<br>re.compile()</p>
<h2 id="贪婪匹配和非贪婪匹配"><a href="#贪婪匹配和非贪婪匹配" class="headerlink" title="贪婪匹配和非贪婪匹配"></a>贪婪匹配和非贪婪匹配</h2><p>当正则表达式中包含能接受重复的限定符时，匹配尽可能多的字符，即贪婪匹配。贪婪匹配:<code>a.*b</code>，将会匹配最长的以a开始以b结束的字符串。如果以它来搜索aabab的化，会匹配整个字符串aabab。<br>非贪婪匹配，在正则表达式后面加个?。  <code>.*?</code>意味着在能使匹配成功的前提下使用最少的重复。<code>a.*b</code>匹配最短的以a开始以b结束的字符，应用于aabab的话，会匹配aab和ab。</p>
<h1 id="Python使用过程中碰到问题"><a href="#Python使用过程中碰到问题" class="headerlink" title="Python使用过程中碰到问题"></a>Python使用过程中碰到问题</h1><h2 id="python-josn-dumps中文乱码问题"><a href="#python-josn-dumps中文乱码问题" class="headerlink" title="python josn dumps中文乱码问题"></a>python josn dumps中文乱码问题</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: strMsg = &#123;<span class="string">"测试"</span>:<span class="string">"值"</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: <span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: <span class="keyword">print</span> json.dumps(strMsg)</span><br><span class="line">&#123;<span class="string">"\u6d4b\u8bd5"</span>: <span class="string">"\u503c"</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: <span class="keyword">print</span> json.dumps(strMsg, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">&#123;<span class="string">"测试"</span>: <span class="string">"值"</span>&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="CaseZheng"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">CaseZheng</p>
  <div class="site-description" itemprop="description">CaseZheng的博客网站</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">130</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CaseZheng" title="GitHub → https://github.com/CaseZheng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:764307915@qq.com" title="E-Mail → mailto:764307915@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CaseZheng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">717k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">10:52</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>












  

  


</body>
</html>
